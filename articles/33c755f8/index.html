<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <meta http-equiv="X-Frame-Options" content="DENY">
  <title>Oracle教程 | 欢迎来到匡盟盟的博客！</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="keywords" content="匡盟盟, Mengmeng Kuang, Blog, 博客" />


  <meta name="google-site-verification" content="3YclHsmiu1_poywYScAg4jt4RGqoHUoIXQJFV5vEZ1I" />


  <meta name="baidu-site-verification" content="d6tIQA0tgL" />


  <meta name="description" content="Oracle第一章  1. 首先打开Oracle服务  2. 配置监听器（这个是因为教室的电脑Oracle安装有问题，没有配置好监听器）开始菜单中找到net configration assistant添加一个监听器  3. 用system用户登录sqlplus  4. 解锁scott用户 :（也是因为教室的Oracle安装问题导致scott账户未解锁）  1   alter user scott">
  <meta name="keywords" content="Java,Oracle">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Oracle教程">
  <meta property="og:url" content="http://www.meng.uno/articles/33c755f8/index.html">
  <meta property="og:site_name" content="欢迎来到匡盟盟的博客！">
  <meta property="og:description" content="Oracle第一章  1. 首先打开Oracle服务  2. 配置监听器（这个是因为教室的电脑Oracle安装有问题，没有配置好监听器）开始菜单中找到net configration assistant添加一个监听器  3. 用system用户登录sqlplus  4. 解锁scott用户 :（也是因为教室的Oracle安装问题导致scott账户未解锁）  1   alter user scott">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:updated_time" content="2018-04-04T08:08:39.000Z">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Oracle教程">
  <meta name="twitter:description" content="Oracle第一章  1. 首先打开Oracle服务  2. 配置监听器（这个是因为教室的电脑Oracle安装有问题，没有配置好监听器）开始菜单中找到net configration assistant添加一个监听器  3. 用system用户登录sqlplus  4. 解锁scott用户 :（也是因为教室的Oracle安装问题导致scott账户未解锁）  1   alter user scott">
  <meta name="twitter:creator" content="@kuangmengmeng">
  <link rel="publisher" href="mengmengkuang">
  <meta property="fb:admins" content="kuangmengmeng">
  <meta property="fb:app_id" content="1559086807462632">

  <link rel="alternate" href="/atom.xml" title="欢迎来到匡盟盟的博客！" type="application/atom+xml">




  <link rel="icon" id="myid" href="/css/images/logo.png">
  <link rel="apple-touch-icon" id="myid" href="/css/images/logo.png">

  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">

  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face {
      font-family: futura-pt;
      src: url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");
      font-weight: 500;
      font-style: normal;
    }

    @font-face {
      font-family: futura-pt;
      src: url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");
      font-weight: 500;
      font-style: normal;
    }

    @font-face {
      font-family: futura-pt;
      src: url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");
      font-weight: lighter;
      font-style: normal;
    }

    @font-face {
      font-family: futura-pt;
      src: url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");
      font-weight: 400;
      font-style: italic;
    }
  </style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css">
  <link rel="stylesheet" href="/css/prism-duotone-sea.css">


  <link rel="stylesheet" href="/css/dialog.css">





  <link rel="stylesheet" href="/css/header-post.css">





  <link rel="stylesheet" href="/css/vdonate.css">




  <!-- 
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":["copy","weixin","linkedin","sqq","tsina","twi","fbook","mail"],"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"0","bdPos":"left","bdTop":"100"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

 -->





  <link rel="canonical" href="http://www.meng.uno/articles/33c755f8/" />

  <link rel="stylesheet" href="/css/animate.css">
  <link rel="stylesheet" href="/css/loading.css">

  <script>
    var linkEle = document.getElementById("myid");
    var tmplink = linkEle.href;

    var tmptitle = document.title;
    document.addEventListener('visibilitychange', function() {
      var isHidden = document.hidden;
      if (isHidden) {
        document.title = '喔唷，崩溃啦！';
        linkEle.href = '/css/images/avatar.png';
      } else {
        document.title = tmptitle;
        linkEle.href = tmplink;

      }
    });


    function Hide() {
      var mychar = document.getElementById("homelogoback").style.display = "none";
    }
  </script>

  <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>




</head>


<body data-spy="scroll" data-target="#toc" data-offset="50">



  <div id="container">
    <div id="wrap">

      <header>
        <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
          <div class="navbar-inner">
            <div class="container">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>


              <a class="brand" style="
                 border-width: 0px;  margin-top: 0px;" href="#" data-toggle="modal" data-target="#myModal">
                  <img class="img-rotate" style="box-shadow:1px 1px 10px 3px #e5e5e5; border-radius: 50%;" width="124px" height="124px" alt="匡盟盟的博客" src="/css/images/logo.png">
              </a>


              <div class="navbar-collapse collapse">
                <ul class="hnav navbar-nav">

                  <li> <a class="main-nav-link" href="/">首页</a> </li>

                  <li> <a class="main-nav-link" href="/archives">所有文章</a> </li>

                  <li> <a class="main-nav-link" href="/categories">分类</a> </li>

                  <li> <a class="main-nav-link" href="/tags">标签</a> </li>

                  <li> <a class="main-nav-link" href="/about">关于我</a> </li>

                  <li> <a class="main-nav-link" href="/comments">留言板</a> </li>

                  <li>
                    <div id="search-form-wrap">

                      <form class="search-form">
                        <input type="text" style="width=0;" class="ins-search-input search-form-input" placeholder="" />
                        <button type="submit" class="search-form-submit"></button>
                      </form>
                      <div class="ins-search">
                        <div class="ins-search-mask"></div>
                        <div class="ins-search-container">
                          <div class="ins-input-wrapper">
                            <input type="text" class="ins-search-input" placeholder="请输入关键词..." />
                            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
                          </div>
                          <div class="ins-section-wrapper">
                            <div class="ins-section-container"></div>
                          </div>
                        </div>
                      </div>
                      <script>
                        (function(window) {
                          var INSIGHT_CONFIG = {
                            TRANSLATION: {
                              POSTS: '文章',
                              PAGES: '页面',
                              CATEGORIES: '分类',
                              TAGS: '标签',
                              UNTITLED: '空标题',
                            },
                            ROOT_URL: '/',
                            CONTENT_URL: '/content.json',
                          };
                          window.INSIGHT_CONFIG = INSIGHT_CONFIG;
                        })(window);
                      </script>
                      <script src="/js/insight.js"></script>

                    </div>
                  </li>

                </ul>
              </div>
            </div>

          </div>
        </div>

      </header>

      <script>
        (function(w, i, d, g, e, t, s) {
          w[d] = w[d] || [];
          t = i.createElement(g);
          t.async = 1;
          t.src = e;
          s = i.getElementsByTagName(g)[0];
          s.parentNode.insertBefore(t, s);
        })(window, document, '_gscq', 'script', '//widgets.getsitecontrol.com/125646/script.js');
      </script>


      <div id="content" class="outer">

        <section id="main" style="float:none;">
          <article id="post-oracle" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost">
            <div id="articleInner" class="article-inner">


              <header class="article-header">
                <h1 class="thumb" class="article-title" itemprop="name">
                  Oracle教程
                </h1>
              </header>

              <div class="article-meta">
                <a href="/articles/33c755f8/" class="article-date">
	  <time datetime="2018-04-04T06:56:38.000Z" itemprop="datePublished">2018-04-04</time>
	</a>
                <a class="article-category-link" href="/categories/Java开发Tips/">Java开发Tips</a>
                <a class="article-views">
	<span id="busuanzi_container_page_pv">
		阅读量<span id="busuanzi_value_page_pv"></span>
	</span>
	<span class="post-count"> | 字数9,954</span>
	<span class="post-count"> | 预计时间40分钟</span>
	</a>
              </div>
              <div class="article-entry" itemprop="articleBody">

                <h1>Oracle第一章</h1>
                <ol>
                  <li>首先打开Oracle服务</li>
                  <li>配置监听器（这个是因为教室的电脑Oracle安装有问题，没有配置好监听器）开始菜单中找到<em>net configration assistant</em>添加一个监听器</li>
                  <li>用system用户登录sqlplus</li>
                  <li>解锁scott用户 :（也是因为教室的Oracle安装问题导致scott账户未解锁）</li>
                </ol>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">alter user scott account unlock;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <ol start="5">
                  <li>修改scott密码:</li>
                </ol>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">alter user scott identified by tiger;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <ol start="6">
                  <li>使用scott登录sqlplus, scott是oracle自带的一个实例账户，它带有四个实例表,其中重要的就是<code>emp</code>员工表与<code>dept</code>部门表</li>
                  <li>安装PL/SQL第三方工具, 因为Oracle没有自带的图形化界面管理器，所以我们需要安装PLSQL，它是oracle的一个第三方GUI工具。</li>
                </ol>
                <p><strong><em>介绍一下Oracle的命令</em></strong></p>
                <ul>
                  <li>连接数据库：</li>
                </ul>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">connect scoott/tiger@orcl;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>用户名为scott，密码为tiger,数据库名为orcl</p>
                <ul>
                  <li>显示当前用户：</li>
                </ul>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">show user;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>也可使用查询语句：</p>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">select USER from dual; --dual是oracle的一个虚拟表</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <ul>
                  <li>显示表结构(以emp表为例)：</li>
                </ul>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">describe emp;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可简写为：</p>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">desc emp;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <h1>Oracle第二章</h1>
                <h2 id="创建表空间">创建表空间</h2>
                <p>（在SqlServer中称为创建一个是数据库，而在Oracle中则称为创建一个表空间）</p>
                <p><em>格式： 	create tablespace 表空间名 datafile ‘文件路径’ size 文件大小</em></p>
                <p>如：</p>
                <pre><code>cerate tablespace myspace datafile 'D:\myspace.dbf' size 10MB;
</code></pre>
                <p>删除表空间：</p>
                <pre><code>drop tablespace myspace incluiding contents and datafile;
</code></pre>
                <h2 id="创建用户">创建用户</h2>
                <p><em>格式： create user 用户名 identified by 密码 default tablespace 默认表空间</em></p>
                <p>如：</p>
                <pre><code>create user user1 identified by user1 default tablespace system;
</code></pre>
                <p><strong>删除用户：</strong></p>
                <pre><code>drop user user1 cascade;
</code></pre>
                <h2 id="给用户授权">给用户授权</h2>
                <p><em>方式一：授予角色</em></p>
                <pre><code>1、connect     //登录
2、resource    //普通权限，用于操作
3、DBA         //管理员权限（慎用）
</code></pre>
                <p>如：</p>
                <pre><code>grant connect to user1;
grant connect,resource to user1;
</code></pre>
                <p><em>方式二：授予单个权限</em></p>
                <p>如：</p>
                <pre><code>grant create table to user1;           //授予user1建表的权限
grant drop table to user1;             //授予user1删表的权限
</code></pre>
                <p><em>方式三：将某个对象的权限授予用户</em></p>
                <p>如：</p>
                <pre><code>grant select on scott.emp to user1;      //将scott用户的emp表的查询权限授予user1
grant all on scott.emp to user1;       //将scott用户的emp表的所有权限授予user1 
</code></pre>
                <p><strong>收回权限：</strong></p>
                <p><em>格式： revoke 权限 from 用户</em></p>
                <p>如：</p>
                <pre><code>revoke connect from user1;   //收回user1的connect权限
revoke select on scott.emp from user1;    //收回user1对emp表的查询权限  
</code></pre>
                <h1>Oracle第三章</h1>
                <h2 id="基本查询">基本查询</h2>
                <p><em>select格式：</em></p>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">select 列名 from 表名 ；</span><br><span class="line">where 查询条件</span><br><span class="line">group by 分组列</span><br><span class="line">having 分组后条件</span><br><span class="line">order by 排序列 asc[desc]</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>如：查询部门10的雇员</p>
                <pre><code>select * from emp where deptno=10;
</code></pre>
                <h2 id="行号-rownum">行号（rownum）</h2>
                <p><strong>每个表都有一个虚列ROWNUM，它用来显示结果中记录的行号。我们在查询中也可以显示这个列。</strong></p>
                <p>如：显示emp表的行号</p>
                <pre><code>select rownum,ename from emp;
</code></pre>
                <p>如：显示前三行</p>
                <pre><code>	select * from emp where rownum&lt;=3;
</code></pre>
                <h2 id="查询进行计算">查询进行计算</h2>
                <p>如：显示雇员工资上浮20%的结果</p>
                <pre><code>select ename,sal,sal*(1+20%) from emp;
</code></pre>
                <p>如：显示每个员工的总工资（工资+奖金）</p>
                <pre><code>update emp set comm = o where comm is null;    //因为null的特殊性，它与任何值运算都等于null，所以先要把它更新为0，后面我们会学到一个函数来处理null值

select ename,sal+comm from emp;
</code></pre>
                <h2 id="使用别名">使用别名</h2>
                <p>如：在查询中使用列别名</p>
                <pre><code>select ename as 名称，sal as 工资 from emp; //建议省略as
</code></pre>
                <p><em>另，在别名为关键字或有特殊符号时需要加双引号</em></p>
                <p>如：</p>
                <pre><code>select ename as &quot;select&quot;,sal*12+5000 as &quot;年度工资（加年终奖）&quot; from emp;
</code></pre>
                <h2 id="连接运算符">连接运算符</h2>
                <p><strong>连接运算符是双竖线“||”。通过连接运算可以将两个字符串连接在一起。</strong></p>
                <p>如：在查询中使用连接运算</p>
                <pre><code>select ename||job as &quot;雇员和职务表&quot; from emp;
</code></pre>
                <p>*注意：‘5’||5结果为’55’    ‘5’+5结果为 10 *</p>
                <h2 id="六-消除重复行-distinct">六、消除重复行（distinct）</h2>
                <p><strong>如果在显示结果中存在重复行，可以使用关键字<code>distinct</code>消除重复显示</strong></p>
                <p>如：统计职务的数量</p>
                <pre><code>select count(distinct job) from emp;
</code></pre>
                <h2 id="排序">排序</h2>
                <p><strong>1、升序（默认为升序<code>asc</code>,所以可以忽略）</strong></p>
                <p>如：查询雇员姓名和工资，并按工资从小到大排序</p>
                <pre><code>select ename,sal from emp order by sal asc;
</code></pre>
                <p><strong>2、降序（<code>desc</code>不可忽略）</strong></p>
                <p>如：查询雇员姓名和雇佣日期，并按雇佣日期排序，后雇佣的先显示</p>
                <pre><code>select ename,hiredate from emp order by hiredate desc;
</code></pre>
                <p><strong>3、多列排序</strong></p>
                <p><em>可以按多列进行排序，先按第一列，然后按第二列、第三列…。</em></p>
                <p>如：查询雇员信息，先按部门从小到大排序，再按雇佣时间的先后排序</p>
                <pre><code>select ename,deptno,hiredate from emp order by deptno hiredate;
</code></pre>
                <h1>Oracle第四章——条件查询、字符型函数</h1>
                <h2 id="条件查询">条件查询</h2>
                <p><strong>1、模糊查询(between、in、like)</strong></p>
                <p>A、between：在某某之间。如,显示工资在1000~2000之间的雇员</p>
                <pre><code>	select * from emp where sal beteween 1000 and 2000;
</code></pre>
                <p>B、in：在某某之间。如，显示职务为“SALMAN”，“CLEARK”和“MANAGER”的雇员信息</p>
                <pre><code>	select * from emp where job in ('SALMAN','CLERK','MANAGER');
</code></pre>
                <p>C、like：与通配符使用</p>
                <p><em>通配符：% 代表0个或任意个字符     —_ 代表1个字符</em></p>
                <p>如：显示姓名以“S”开头的雇员信息。</p>
                <pre><code>	select * from emp where ename like 'S%';
</code></pre>
                <p>显示姓名第二个字符为“A”的雇员信息</p>
                <pre><code>	select * from emp ename like '_A%';
</code></pre>
                <p><strong>2、空值查询</strong></p>
                <p><em>空：is null      非空： is not null</em></p>
                <p>如：查询奖金为空的雇员信息</p>
                <pre><code>	select * from emp where comm is null;
</code></pre>
                <h2 id="函数">函数</h2>
                <p><strong>1、数学函数</strong></p>
                <table>
                  <tr>
                    <td>函数</td>
                    <td>功能</td>
                    <td>实例</td>
                    <td>结果</td>
                  </tr>
                  <tr>
                    <td>abs</td>
                    <td>求绝对值函数</td>
                    <td>abs(-5)</td>
                    <td>5</td>
                  </tr>
                  <tr>
                    <td>sqrt</td>
                    <td>求平方根</td>
                    <td>sqrt(2)</td>
                    <td>1.414</td>
                  </tr>
                  <tr>
                    <td>power</td>
                    <td>求幂函数</td>
                    <td>power(2,3)</td>
                    <td>8</td>
                  </tr>
                </table>
                <p>使用求绝对值函数abs</p>
                <pre><code>	select abs(-5) from dual;
</code></pre>
                <p>使用求平方根函数sqrt。</p>
                <pre><code>	select sqrt(2) from dual;
</code></pre>
                <p>使用ceil函数。</p>
                <pre><code>	select ceil(2.35) from dual;
</code></pre>
                <p>使用floor函数。</p>
                <pre><code>	select floor(2.35) from dual;
</code></pre>
                <p><strong>2、使用四舍五入函数round</strong> <small> 格式：round(数字，保留的位数)</small></p>
                <pre><code>select round(45.923,2), round(45.923,0), round(45.923,-1) from dual;
</code></pre>
                <p><strong>3、字符型函数</strong></p>
                <table>
                  <tr>
                    <td>ascii</td>
                    <td>返回与ASCII码相应的字符</td>
                    <td>Ascii('A')</td>
                    <td>65</td>
                  </tr>
                  <td>char</td>
                  <td>返回与ASCII码相应的字符</td>
                  <td>char(65)</td>
                  <td>A</td>
                  <tr>
                    <td>lower</td>
                    <td>将字符串转换成小写</td>
                    <td>lower ('SQL Course')</td>
                    <td>sql course</td>
                  </tr>
                  <tr>
                    <td>upper</td>
                    <td>将字符串转换成</td>
                    <td>upper('SQL Course')</td>
                    <td>SQL COURSE</td>
                  </tr>
                  <tr>
                    <td>initcap</td>
                    <td>将字符串转换成每个单词以大写开头</td>
                    <td>initcap('SQL course')</td>
                    <td>SQL Course</td>
                  </tr>
                  <tr>
                    <td>concat</td>
                    <td>连接两个字符串</td>
                    <td>concat('SQL', ' Course')</td>
                    <td>SQL Course</td>
                  </tr>
                  <tr>
                    <td>substr</td>
                    <td>给出起始位置和长度，返回子字符串</td>
                    <td>substr('String',1,3)</td>
                    <td>Str</td>
                  </tr>
                  <tr>
                    <td>length</td>
                    <td>求字符串的长度</td>
                    <td>length('Wellcom')</td>
                    <td>7</td>
                  </tr>
                  <tr>
                    <td>trim</td>
                    <td>在一个字符串中去除另一个字符串</td>
                    <td>trim('S' FROM 'SSMITH')</td>
                    <td>MITH</td>
                  </tr>
                  <tr>
                    <td>replace</td>
                    <td>用一个字符串替换另一个字符串中的子字符串</td>
                    <td>replace('ABC', 'B', 'D')</td>
                    <td>ADC</td>
                  </tr>
                </table>
                <p>如果不知道表的字段内容是大写还是小写，可以转换后比较。</p>
                <pre><code>	select empno, ename,deptno from emp where lower(ename)='blake';
</code></pre>
                <p>显示名称以“W”开头的雇员，并将名称转换成以大写开头。</p>
                <pre><code>	select empno,initcap(ename),job from emp wher substr(ename,1,1)='W';
</code></pre>
                <p>显示雇员名称中包含“S”的雇员名称及名称长度。</p>
                <pre><code>	select empno,ename,legth(ename) from emp where instr(ename,'S',1,1)&gt;0;
</code></pre>
                <h1>Oracle第五章——函数</h1>
                <h2 id="日期型函数">日期型函数</h2>
                <p><strong>Oracle使用内部数字格式来保存时间和日期，包括世纪、年、月、日、小时、分、秒。缺省日期格式为 DD-MON-YY，如“08-05月-03”代表2003年5月8日。</strong></p>
                <ul>
                  <li>SYSDATE：返回系统日期和时间的虚列函数。</li>
                </ul>
                <p>如：返回系统的当前日期。</p>
                <pre><code>	SELECT sysdate FROM dual;
</code></pre>
                <ul>
                  <li>对两个日期相减，得到相隔天数。</li>
                </ul>
                <p><em>通过加小时来增加天数，24小时为一天，如12小时可以写成12/24(或0.5)。</em></p>
                <p>如：例1 假定当前的系统日期是2003年2月6日，求再过1000天的日期。</p>
                <pre><code>	SELECT sysdate+1000 AS &quot;NEW DATE&quot; FROM dual;
</code></pre>
                <p>例2：两个日期相减</p>
                <pre><code>	 select to_date('1-1月-2000') - to_date('1-8月-1999') from dual;
</code></pre>
                <ul>
                  <li>其它日期函数</li>
                </ul>
                <table>
                  <thead>
                    <tr>
                      <th>函数</th>
                      <th>功能</th>
                      <th>实例</th>
                      <th>结果</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>months_between</td>
                      <td>返回两个日期间的月份</td>
                      <td>months_between (‘04-11月-05’,‘11-1月-01’)57.7741935</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>add_months</td>
                      <td>返回把月份数加到日期上的新日期</td>
                      <td>add_months(‘06-2月-03’,1)，add_months(‘06-2月-03’,-1)</td>
                      <td>06-3月-03，06-1月-03</td>
                    </tr>
                    <tr>
                      <td>next_day</td>
                      <td>返回指定日期后的星期对应的新日期</td>
                      <td>next_day(‘06-2月-03’,‘星期一’)</td>
                      <td>10-2月-03</td>
                    </tr>
                    <tr>
                      <td>last_day</td>
                      <td>返回指定日期所在的月的最后一天</td>
                      <td>last_day(‘06-2月-03’)</td>
                      <td>28-2月-03</td>
                    </tr>
                    <tr>
                      <td>round</td>
                      <td>按指定格式对日期进行四舍五入</td>
                      <td>round(to_date(‘13-2月-03’),‘YEAR’)，round(to_date(‘13-2月-03’),‘MONTH’)，round(to_date(‘13-2月-03’),‘DAY’)</td>
                      <td>01-1月-03，01-2月-03，16-2月-03(按周四舍五入)</td>
                    </tr>
                  </tbody>
                </table>
                <p>如：返回2003年2月的最后一天。</p>
                <pre><code>	SELECT last_day('08-2月-03') FROM dual;
</code></pre>
                <p>假定当前的系统日期是2003年2月6日，显示部门10雇员的雇佣天数。</p>
                <pre><code>	SELECT ename, round(sysdate-hiredate) DAYS FROM emp WHERE  deptno = 10;
</code></pre>
                <h2 id="转换函数">转换函数</h2>
                <table>
                  <thead>
                    <tr>
                      <th>函数</th>
                      <th>功能</th>
                      <th>实例</th>
                      <th>结果</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>To_char</td>
                      <td>转换成字符串类型</td>
                      <td>To_char(1234.5, ‘$9999.9’)</td>
                      <td>$1234.5</td>
                    </tr>
                    <tr>
                      <td>To_date</td>
                      <td>转换成日期类型</td>
                      <td>To_date(‘1980-01-01’, ‘yyyy-mm-dd’)</td>
                      <td>01-1月-80</td>
                    </tr>
                    <tr>
                      <td>To_number</td>
                      <td>转换成数值类型</td>
                      <td>To_number(‘1234.5’)</td>
                      <td>1234.5</td>
                    </tr>
                  </tbody>
                </table>
                <ul>
                  <li>自动类型转换</li>
                </ul>
                <figure class="highlight plain">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">SELECT &apos;12.5&apos;+11 FROM dual;    //结果为：23.5</span><br><span class="line">Select  ‘12.5’||11 from dual;    //结果为：’12.511’</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <ul>
                  <li>日期类型转换</li>
                </ul>
                <table>
                  <thead>
                    <tr>
                      <th>代码</th>
                      <th>代表的格式</th>
                      <th>例子</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>AM、PM</td>
                      <td>上午、下午</td>
                      <td>08 AM</td>
                    </tr>
                    <tr>
                      <td>D</td>
                      <td>数字表示的星期(1～7)</td>
                      <td>1,2,3,4,5,6,7</td>
                    </tr>
                    <tr>
                      <td>DD</td>
                      <td>数字表示月中的日期(1～31)</td>
                      <td>1,2,3,…,31</td>
                    </tr>
                    <tr>
                      <td>MM</td>
                      <td>两位数的月份</td>
                      <td>01,02,…,12</td>
                    </tr>
                    <tr>
                      <td>Y、YY、YYY、YYYY</td>
                      <td>年份的后几位</td>
                      <td>3,03,003,2003</td>
                    </tr>
                    <tr>
                      <td>RR</td>
                      <td>解决Y2K问题的年度转换</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>DY</td>
                      <td>简写的星期名</td>
                      <td>MON,TUE,FRI,…</td>
                    </tr>
                    <tr>
                      <td>DAY</td>
                      <td>全拼的星期名</td>
                      <td>MONDAY,TUESDAY,…</td>
                    </tr>
                    <tr>
                      <td>MON</td>
                      <td>简写的月份名</td>
                      <td>JAN,FEB,MAR,…</td>
                    </tr>
                    <tr>
                      <td>MONTH</td>
                      <td>全拼的月份名</td>
                      <td>JANUARY,FEBRUARY,…</td>
                    </tr>
                    <tr>
                      <td>HH、HH12</td>
                      <td>12小时制的小时(1～12)</td>
                      <td>1,2,3,…,12</td>
                    </tr>
                    <tr>
                      <td>HH24</td>
                      <td>24小时制的小时(0～23)</td>
                      <td>0,1,2,…,23</td>
                    </tr>
                    <tr>
                      <td>MI</td>
                      <td>分(0～59)</td>
                      <td>0,1,2,…,59</td>
                    </tr>
                    <tr>
                      <td>SS</td>
                      <td>秒(0～59)</td>
                      <td>0,1,2,…,59</td>
                    </tr>
                    <tr>
                      <td>,./-;:</td>
                      <td>原样显示的标点符号</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>‘TEXT’</td>
                      <td>引号中的文本原样显示</td>
                      <td>TEXT</td>
                    </tr>
                  </tbody>
                </table>
                <p>如：1、日期型转字符型</p>
                <p>将日期转换成带时间和星期的字符串并显示。</p>
                <pre><code>	SELECT TO_CHAR(sysdate,'YYYY-MM-DD HH24:MI:SS AM DY') FROM dual;
</code></pre>
                <p>将日期显示转换成中文的年月日。</p>
                <pre><code>	SELECT TO_CHAR(sysdate,'YYYY&quot;年&quot;MM&quot;月&quot;DD&quot;日&quot;') FROM dual;
</code></pre>
                <p>2.字符型转日期型</p>
                <p>往emp表中插入一条记录</p>
                <pre><code>insert into emp values(8888,'张三','CLERK',7369,to_date('1-1月-2000'),1000,10,10);
insert into emp values(8889,'李四','CLERK',7369,to_date('2000-01-01','YYYY-MM-DD'),1000,10,10);
</code></pre>
                <h2 id="其他常用函数">其他常用函数</h2>
                <table>
                  <thead>
                    <tr>
                      <th>函数</th>
                      <th>功能</th>
                      <th>实例</th>
                      <th>结果</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>nvl</td>
                      <td>空值转换函数</td>
                      <td>nvl(null, ‘空’)</td>
                      <td>空</td>
                    </tr>
                    <tr>
                      <td>decode</td>
                      <td>实现分支功能</td>
                      <td>decode(1,1, ‘男’, 2, ‘女’)</td>
                      <td>男</td>
                    </tr>
                    <tr>
                      <td>userenv</td>
                      <td>返回环境信息</td>
                      <td>userenv(‘LANGUAGE’)</td>
                      <td>SIMPLIFIED CHINESE_CHINA.ZHS16GBK</td>
                    </tr>
                    <tr>
                      <td>greatest</td>
                      <td>返回参数的最大值</td>
                      <td>greatest(20,35,18,9)</td>
                      <td>35</td>
                    </tr>
                    <tr>
                      <td>least</td>
                      <td>least返回参数的最小值</td>
                      <td>least(20,35,18,9)</td>
                      <td>9</td>
                    </tr>
                  </tbody>
                </table>
                <h3 id="1-空值的转换">1．空值的转换</h3>
                <p><em>如果对空值NULL不能很好的处理，就会在查询中出现一些问题。在一个空值上进行算术运算的结果都是NULL。最典型的例子是，在查询雇员表时，将工资sal字段和津贴字段comm进行相加，如果津贴为空，则相加结果也为空，这样容易引起误解。</em></p>
                <p><strong>使用nvl函数，可以转换NULL为实际值。该函数判断字段的内容，如果不为空，返回原值；为空，则返回给定的值。</strong></p>
                <p>如下3个函数，分别用新内容代替字段的空值：</p>
                <pre><code>	nvl(comm, 0)：用0代替空的Comm值。
	nvl(hiredate, '01-1月-97')：用1997年1月1日代替空的雇佣日期。
	nvl(job, '无')：用“无”代替空的职务。
</code></pre>
                <p>使用nvl函数转换空值。</p>
                <pre><code>	SELECT	ename,nvl(job,'无'),nvl(hiredate,'01-1月-97'),nvl(comm,0) FROM	 emp;
</code></pre>
                <h3 id="2-decode函数">2．decode函数</h3>
                <p><em>decode函数可以通过比较进行内容的转换，完成的功能相当于分支语句。
在参数的最后位置上可以存在单独的参数，如果以上比较过程没有找到匹配值，则返回该参数的值，如果不存在该参数，则返回NULL。</em></p>
                <p>将职务转换成中文显示。</p>
                <pre><code>	SELECT	ename,decode(job, 'MANAGER', '经理', 'CLERK','职员', 'SALESMAN','推销员', 'ANALYST','系统分析员','未知') FROM emp;
</code></pre>
                <h3 id="3-最大-最小值函数">3．最大、最小值函数</h3>
                <p><em>greatest返回参数列表中的最大值，least返回参数列表中的最小值。</em></p>
                <p><strong>如果表达式中有NULL，则返回NULL。</strong></p>
                <h1>Oracle第六章——相等、外连接</h1>
                <h2 id="相等连接">相等连接</h2>
                <h3 id="1-三个步骤">1、三个步骤</h3>
                <p>A、先列出要显示的列： select ename,job,comm,emp,deptno,dname</p>
                <p>B、列出查询的表： from emp,dept</p>
                <p>C、列出多表相连条件（主外键）：where emp.deptno=dept.deptno</p>
                <p><em>注意：如果两个表有同名列，那么前面必须接表名 如： emp.deptno ,如果不是同名字段则表名可以省略</em></p>
                <h3 id="2-inner-join-的写法">2、inner join 的写法</h3>
                <pre><code>select enaem,job,sal,comm,emp.deptno,dname from emp inner join dept on emp.deptno = dept.deptno;
</code></pre>
                <h3 id="3-三表或三表以上的写法">3、三表或三表以上的写法</h3>
                <pre><code>select 字段1，字段2 , 字段3 。。。。from 表1，表2，表3.。。where 表1.外键 = 表2.主键  and 表1.外键 = 表3.主键 and 。。。
</code></pre>
                <p><em>注意：两个表有一个条件 ，三个表有两个条件 ，四个表有三个条件 以此类推</em></p>
                <h2 id="外连接-不等连接">外连接（不等连接）</h2>
                <p><em>左外连接即在内连接的基础上，左边表中有但右边表中没有的记录也以null的形式显示出来，右外连接则反之</em></p>
                <h3 id="1-写法1">1、写法1</h3>
                <p><em>(右外连接)</em></p>
                <pre><code>select ename,d.deptno,dname from emp e,dept d where e.deptno(+) = d.deptno
</code></pre>
                <p><em>(左外连接)</em></p>
                <pre><code>select ename,d.deptno,dname from emp e,dept d where d.deptno = e.deptno(+)    
</code></pre>
                <h3 id="2-写法2">2、写法2</h3>
                <pre><code>select ename,d.deptno,dname from emp e right join dept d on e.deptno = d.deptno  
</code></pre>
                <h1>Oracle第七章——连接、分组查询</h1>
                <h2 id="不等连接">不等连接</h2>
                <p><strong>拿一个表作为另一表的查询条件或范围</strong></p>
                <p>如：显示雇员名称，工资和所属工资等级。</p>
                <pre><code>select e.ename,e.sal,s.grade from emp e,salgrade s where e.sal between s.losal and s.hisal;
</code></pre>
                <h2 id="自连接">自连接</h2>
                <p><strong>自连接就是一个表，同本身进行连接。对于自连接可以想像存在两个相同的表(表和表的副本)，可以通过不同的别名区别两个相同的表（其它就是内连接)</strong></p>
                <p>如：显示雇员名称和雇员的经理名称</p>
                <pre><code>select worker.ename||'的经理是'||manager.ename as 雇员经理 from emp worker,emp manager where worker.mgr=manager.empno;
</code></pre>
                <h2 id="组函数">组函数</h2>
                <ul>
                  <li>组函数只能应用于SELECT子句、HAVING子句或ORDER BY子句中。</li>
                  <li>组函数也可以称为统计函数。</li>
                  <li>组函数忽略列的空值。</li>
                  <li>对组可以应用组函数。</li>
                  <li>在组函数中可使用DISTINCT或ALL关键字。</li>
                  <li>ALL表示对所有非NULL值(可重复)进行运算。</li>
                  <li>DISTINCT 表示对每一个非NULL值，如果存在重复值，则组函数只运算一次。如果不指明上述关键字，默认为ALL。</li>
                </ul>
                <table>
                  <thead>
                    <tr>
                      <th>函数</th>
                      <th>说明</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>AVG</td>
                      <td>求平均值</td>
                    </tr>
                    <tr>
                      <td>COUNT</td>
                      <td>求计数值，返回非空行数，*表示返回所有行</td>
                    </tr>
                    <tr>
                      <td>MAX</td>
                      <td>求最大值</td>
                    </tr>
                    <tr>
                      <td>MIN</td>
                      <td>求最小值</td>
                    </tr>
                    <tr>
                      <td>SUM</td>
                      <td>求和</td>
                    </tr>
                    <tr>
                      <td>SIDDEV</td>
                      <td>求标准偏差，是根据差的平方根得到的</td>
                    </tr>
                    <tr>
                      <td>VARIANCE</td>
                      <td>求统计方差</td>
                    </tr>
                  </tbody>
                </table>
                <h2 id="分组查询">分组查询</h2>
                <p><strong>1、如：按职务统计工资总和。</strong></p>
                <pre><code>select deptno,job,sum(sal) from emp group by deptno,job;
</code></pre>
                <p><strong>2、多列分组</strong></p>
                <p>如：按部门和职务分组统计工资总和:</p>
                <pre><code>select deptno,job,sum(sal) from emp group by deptno,job;
</code></pre>
                <p><strong>3、HAVING</strong></p>
                <p><em>HAVING从句过滤分组后的结果，它只能出现在GROUP BY从句之后，而WHERE从句要出现在GROUP BY从句之前。</em></p>
                <p>如：统计各部门的最高工资，排除最高工资小于3000的部门。</p>
                <pre><code>select deptno,max(sal) from emp group by deptno having max(sal)&gt;=3000;
</code></pre>
                <p><strong>4、分组统计结果排序</strong></p>
                <p><em>可以使用ORDER BY从句对统计的结果进行排序，ORDER BY从句要出现在语句的最后。</em></p>
                <p>如：按职务统计工资总和并排序。</p>
                <pre><code>select job 职务, sum(sal) 工资总和 from emp group by job order by sum(sal);
</code></pre>
                <p><strong>5、组函数的嵌套使用</strong></p>
                <p>如：求各部门平均工资的最高值。</p>
                <pre><code>select max(avg(sal)) from emp group by deptno;
</code></pre>
                <h1>Oracle第八章——子查询</h1>
                <h2 id="子查询">子查询</h2>
                <p><strong>通过把一个查询的结果作为另一个查询的一部分,子查询一般出现在SELECT语句的WHERE子句中，Oracle也支持在FROM或HAVING子句中出现子查询。子查询比主查询先执行，结果作为主查询的条件，在书写上要用圆括号扩起来，并放在比较运算符的右侧。</strong></p>
                <h3 id="1-单行子查询">1、单行子查询</h3>
                <p>如：查询比SCOTT工资高的雇员名字和工资。</p>
                <pre><code>select ename,sal from emp where sal&gt;(select sal from emp where empno=7788);
</code></pre>
                <h3 id="2-多行子查询">2、多行子查询*</h3>
                <p><strong>如果子查询返回多行的结果，则我们称它为多行子查询。多行子查询要使用不同的比较运算符号，它们是IN、ANY和ALL。</strong></p>
                <p>如:查询工资低于任意一个“CLERK”的工资的雇员信息。</p>
                <pre><code>select empno,ename,job,sal from emp where sal &lt; any (select sal from emp where job = 'CLERK') and job &lt;&gt; 'CLERK';
</code></pre>
                <p>如： 查询工资比所有的“SALESMAN”都高的雇员的编号、名字和工资。</p>
                <pre><code>select empno,ename,job from emp where job in (select job from emp where deptno = 10) and deptno = 20;
</code></pre>
                <h3 id="3-多列子查询">3.多列子查询</h3>
                <p>**如果子查询返回多列，则对应的比较条件中也应该出现多列，这种查询称为多列子查询。以下是多列子查询的训练实例。 ** 如： 查询职务和部门与SCOTT相同的雇员的信息。</p>
                <pre><code>select empno, ename,sal from emp where (job,deptno) = (select job,deptno from emp where empno = 7788);
</code></pre>
                <h3 id="4-在from从句中使用子查询">4．在FROM从句中使用子查询</h3>
                <p><strong>在FROM从句中也可以使用子查询，在原理上这与在WHERE条件中使用子查询类似。有的时候我们可能要求从雇员表中按照雇员出现的位置来检索雇员，很容易想到的是使用rownum虚列。比如我们要求显示雇员表中6～9位置上的雇员，可以用以下方法</strong></p>
                <p>如：查询雇员表中排在第6～9位置上的雇员。</p>
                <pre><code>select ename, sal, from (select rownum as num,ename,sal from emp where rownum&lt;=9) where num&gt;=6;
</code></pre>
                <h2 id="集合运算">集合运算</h2>
                <table>
                  <thead>
                    <tr>
                      <th>操作</th>
                      <th>描述</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>union</td>
                      <td>并集，合并两个操作的结果，去掉重复的部分</td>
                    </tr>
                    <tr>
                      <td>union all</td>
                      <td>并集，合并两个操作的结果，保留重复的部分</td>
                    </tr>
                    <tr>
                      <td>minus</td>
                      <td>差集，从前面的操作结果中去掉与后面操作结果相同的部分</td>
                    </tr>
                    <tr>
                      <td>intersect</td>
                      <td>交集，取两个操作结果中相同的部分</td>
                    </tr>
                  </tbody>
                </table>
                <p>如：查询部门10和部门20的所有职务。</p>
                <pre><code>select job from emp where deptno = 10 
union
select job from emp where deptno = 20;
</code></pre>
                <p>如：查询只在部门表中出现，但没有在雇员表中出现的部门编号。</p>
                <pre><code>select deptno from dept
minus
select deptno from emp;
</code></pre>
                <h1>Oracle第九章——增删改、序列、事务</h1>
                <h2 id="增删改">增删改</h2>
                <p>增： <code>insert into 表名(列名) values (值)；</code></p>
                <p>删： <code>delete from 表名 where 条件；</code></p>
                <p>改： <code>update 表名 set 列名1=值1，列名2=值2... where 条件；</code></p>
                <h2 id="复制数据">复制数据</h2>
                <p><strong>1、通过一条查询语句创建一个新表(要求目标表不存在)</strong></p>
                <pre><code>create table manager as select empno,ename,sal, from emp where job= 'CLERK';
</code></pre>
                <p><strong>2、通过一条查询语句复制数据(要求目标表必须已建好)</strong></p>
                <pre><code>insert into manager select empno,ename,sal from emp where job = 'CLERK';
</code></pre>
                <h2 id="序列">序列</h2>
                <h3 id="1-创建序列">1、创建序列</h3>
                <p>如：创建从2000起始，增量为1 的序列abc：</p>
                <pre><code>create sequence abc increment by 1 start with 2000
maxvalue 99999 cycle nocache;
</code></pre>
                <h3 id="2-使用序列">2、使用序列</h3>
                <p>序列名.nextval: 代表下一个值</p>
                <p>序列名.currval: 代表当前值</p>
                <p>如：</p>
                <pre><code>insert into manager values(abc.nextval,'小王',2500);
insert into manager values(abc.nextval,'小赵'，2800);
</code></pre>
                <h2 id="事务">事务</h2>
                <p>    <strong>两次连续成功的COMMIT或ROLLBACK之间的操作，称为一个事务。在一个事务内，数据的修改一起提交或撤销，如果发生故障或系统错误，整个事务也会自动撤销</strong><br>
                  <strong>数据库事务处理可分为隐式和显式两种。显式事务操作通过命令实现，隐式事务由系统自动完成提交或撤销(回退)工作，无需用户的干预。</strong></p>
                <p>1、隐式提交的情况包括：</p>
                <p>    当用户正常退出SQL*Plus或执行CREATE、DROP、GRANT、REVOKE等命令时会发生事务的自动提交。</p>
                <p>2、显示事务:</p>
                <pre>
COMMIT	        数据库事务提交，将变化写入数据库
ROLLBACK	数据库事务回退，撤销对数据的修改
SAVEPOINT	创建保存点，用于事务的阶段回退
</pre>
                <h1>Oracle第十章————建表</h1>
                <h2 id="建表">建表</h2>
                <p>格式：</p>
                <pre>
create table 表名
      (
	  列名1   类型   约束,
	  列名2   类型   约束,
	  ......			
      );
</pre>
                <p>如：</p>
                <p>– 创建出版社表</p>
                <pre><code>create table 出版社（
	编号 varchar2(2),
	出版社名称 varchar2(30),
	地址 varchar2(30),
	联系电话 varchar2(20)
）;
</code></pre>
                <p>– 创建图书表</p>
                <pre><code>create table 图书 (
	图书编号 VARCHAR2(5),
	图书名称 VARCHAR2(30),
	出版社编号 VARCHAR2(2),
	作者 VARCHAR2(10),
	出版日期 DATE,
	数量 NUMBER(3),
	单价 NUMBER(7,2)	
);
</code></pre>
                <h2 id="通过子查询建表">通过子查询建表</h2>
                <p>步骤1：完全复制图书表到“图书1”</p>
                <pre><code>create table 图书1 as select * from 图书;
</code></pre>
                <p>步骤2：创建新的图书表“图书2”，只包含书名和单价</p>
                <pre><code>create table 图书2（书名，单价） as seelct 图书名称，单价 from 图书；
</code></pre>
                <p>步骤3：创建新的图书表“图书3”，只包含书名和单价，不复制内容</p>
                <pre><code>create table 图书3（书名，单价） as select 图书名称，单价 from 图书 where 1=2；
</code></pre>
                <h2 id="添加表的约束">添加表的约束</h2>
                <pre>
主键     primary key      PK
唯一     unique           UQ
默认值   default          DF
检查约束 check            CK
外键约束 foreign key      FK
</pre>
                <h3 id="方法一：建表的同时添加约束">方法一：建表的同时添加约束</h3>
                <p>如：</p>
                <pre>
create table stuinfo(
 sno int primary key not null,       --主键
 sname varchar2(10) unique not null,       --唯一
 sex char(2) default '男' check(sex='男' or sex = '女') not null,   --默认及检查
 saddress varchar2(50) not null,
 phone char(11),
 email varchar2(50)
);
create table stumarks(
 marksId int,
 sno int references stuinfo(sno) not null,     --外键
 score number(5,1),
 examDate date default sysdate
);
</pre>
                <h3 id="方法二：建表完成后-再添加约束">方法二：建表完成后，再添加约束</h3>
                <p>如：（之前已建好了出版社表及图书表）</p>
                <p>–主键约束</p>
                <pre><code>alter table 出版社 add constraint PK_编号 primary key (编号);
</code></pre>
                <p>–唯一约束</p>
                <pre><code>alter table 出版社 add constraint UQ_地址 unique (地址);
</code></pre>
                <p>–检查约束</p>
                <pre><code>alter table 出版社 add constraint CK_联系电话 check (联系电话 like '1%');
</code></pre>
                <p>–默认值</p>
                <pre><code>alter table 出版社 modify 地址 default '湘潭';
</code></pre>
                <p>–外键约束</p>
                <pre><code>alter table 图书 add constraint FK_图书编号 foreign key (图书编号) references 出版社(编号);
</code></pre>
                <p>–外键约束</p>
                <pre><code>alter table 图书 add constraint FK_图书编号 foreign key (图书编号) references 出版社(编号);
</code></pre>
                <h2 id="查看约束条件">查看约束条件</h2>
                <p><strong>数据字典<code>USER_CONSTRAINTS</code>中包含了当前模式用户的约束条件信息。其中，CONSTRAINTS_TYPE 显示的约束类型为：</strong></p>
                <pre>		
C：CHECK约束。
P：PRIMARY KEY约束。
U：UNIQUE约束。
R：FOREIGN KEY约束。
</pre>
                <p><em>其他信息可根据需要进行查询显示，可用DESCRIBE命令查看<code>USER_CONSTRAINTS的</code>结构。</em></p>
                <p>如:检查表的约束信息：</p>
                <pre><code>SELECT CONSTRAINT_NAME,CONSTRAINT_TYPE,SEARCHCONDITON
FROM USER_CONSTRAINTS
WHERE TABLE_NAME='图书';
</code></pre>
                <h2 id="删除约束条件">删除约束条件</h2>
                <pre><code>ALTER TABLE 表名 DROP CONSTRAINT 约束名;
</code></pre>
                <h2 id="表的操作">表的操作</h2>
                <pre>
1、删除表    drop table 表名
2、重命名表  RENAME 表名 TO 新表名;
3、查看表
</pre>
                <p><em>可以通过对数据字典<code>USER_OBJECTS</code>的查询，显示当前模式用户的所有表。</em></p>
                <p>如： 显示当前用户的所有表。</p>
                <pre><code>SELECT object_name FROM user_objects WHERE object_type='TABLE';
</code></pre>
                <h2 id="修改表">修改表</h2>
                <h3 id="1-增加新列">1、增加新列:</h3>
                <p>如： 为“出版社”增加一列“电子邮件”：</p>
                <pre><code>ALTER TABLE 出版社		
ADD 电子邮件 VARCHAR2(30) CHECK(电子邮件 LIKE '%@%');
</code></pre>
                <h3 id="2-修改列">2、修改列</h3>
                <p>修改列定义有以下一些特点：</p>
                <pre>
(1) 列的宽度可以增加或减小，在表的列没有数据或数据为NULL时才能减小宽度。
(2) 在表的列没有数据或数据为NULL时才能改变数据类型，CHAR和VARCHAR2之间可以随意转换。
(3) 只有当列的值非空时，才能增加约束条件NOT NULL。
(4) 修改列的默认值，只影响以后插入的数据。如：修改“出版社”表“电子邮件”列的宽度为40。
</pre>
                <pre><code>ALTER TABLE 出版社 MODIFY 电子邮件 VARCHAR2(40);
</code></pre>
                <h3 id="3-删除列">3、删除列</h3>
                <p>如：删除“出版社”表的“电子邮件”列。</p>
                <pre><code>ALTER TABLE 出版社 DROP COLUMN 电子邮件;
</code></pre>
                <h1>Oracle第十一章————视图</h1>
                <h2 id="分区表">分区表</h2>
                <p><strong>在某些场合会使用非常大的表，比如人口信息统计表。如果一个表很大，就会降低查询的速度，并增加管理的难度。一旦发生磁盘损坏，可能整个表的数据就会丢失，恢复比较困难。根据这一情况，可以创建分区表，把一个大表分成几个区(小段)，对数据的操作和管理都可以针对分区进行，这样就可以提高数据库的运行效率。分区可以存在于不同的表空间上，提高了数据的可用性。例：创建和使用分区表。</strong></p>
                <p>如：创建按成绩分区的考生表，共分为3个区：</p>
                <pre>		
CREATE TABLE 考生 (
	考号 VARCHAR2(5),
	姓名 VARCHAR2(30),
	成绩 NUMBER(3)
	)
PARTITION BY RANGE(成绩)
(PARTITION A VALUES LESS THAN (300)
TABLESPACE USERS,
PARTITION B VALUES LESS THAN (500)
TABLESPACE USERS,
PARTITION C VALUES LESS THAN (MAXVALUE)
TABLESPACE USERS	
);
</pre>
                <p>步骤3：检查A区中的考生：</p>
                <pre><code>SELECT *  FROM  考生 PARTITION(A);
</code></pre>
                <p>步骤4：检查全部的考生：</p>
                <pre><code>SELECT *  FROM  考生;
</code></pre>
                <h2 id="视图">视图</h2>
                <h3 id="1-视图的概念">1、视图的概念</h3>
                <p>视图不同于表，视图本身不包含任何数据。而视图只是一种定义，对应一个查询语句。视图的数据都来自于某些表，这些表被称为基表。</p>
                <p>视图可以在表能够使用的任何地方使用，但在对视图的操作上同表相比有些限制，特别是插入和修改操作。对视图的操作将传递到基表，所以在表上定义的约束条件和触发器在视图上将同样起作用。2、视图的创建</p>
                <h3 id="2-格式：">2、格式：</h3>
                <pre><code>create [or replace] view 视图名 
as
select 语句;
</code></pre>
                <p>例：创建图书作者视图：</p>
                <pre><code>CREATE VIEW 图书作者(书名,作者) 		
AS SELECT 图书名称,作者 FROM 图书;
</code></pre>
                <p>查询视图全部内容</p>
                <pre><code>SELECT * FROM 图书作者;    
</code></pre>
                <p>查询部分视图：</p>
                <pre><code>SELECT 作者 FROM 图书作者;
</code></pre>
                <p>删除视图：</p>
                <pre><code>DROP VIEW 清华图书;
</code></pre>
                <h3 id="3-创建只读视图">3．创建只读视图</h3>
                <p>创建只读视图要用<code>WITH READ ONLY</code>选项。</p>
                <p>例：创建emp表的经理视图：</p>
                <pre><code>CREATE OR REPLACE VIEW manager 
AS SELECT * FROM emp WHERE job= 'MANAGER'
WITH READ ONLY;
</code></pre>
                <h3 id="4-使用with-check-option选项">4．使用WITH CHECK OPTION选项</h3>
                <p>使用<code>WITH CHECK OPTION</code>选项。使用该选项，可以对视图的插入或更新进行限制，即该数据必须满足视图定义中的子查询中的WHERE条件，否则不允许插入或更新。</p>
                <p>例：</p>
                <pre><code>CREATE OR REPLACE VIEW 清华图书 		
AS SELECT * FROM 图书 WHERE 出版社编号= '01'
</code></pre>
                <p><em>WITH CHECK OPTION;注：插入数据时，由于带了with check option的选项，则只能插入出版社编为’01’的数据</em></p>
                <h3 id="5-来自基表的限制">5．来自基表的限制</h3>
                <p>除了以上的限制，基表本身的限制和约束也必须要考虑。如果生成子查询的语句是一个分组查询，或查询中出现计算列，这时显然不能对表进行插入。另外，主键和NOT NULL列如果没有出现在视图的子查询中，也不能对视图进行插入。在视图中插入的数据，也必须满足基表的约束条件。</p>
                <h3 id="6-视图的查看">6.视图的查看</h3>
                <p><code>USER_VIEWS</code>字典中包含了视图的定义。</p>
                <p><code>USER_UPDATABLE_COLUMNS</code>字典包含了哪些列可以更新、插入、删除。</p>
                <p><code>USER_OBJECTS</code>字典中包含了用户的对象。</p>
                <p>可以通过<code>DESCRIB</code>E命令查看字典的其他列信息。</p>
                <p>例：查看用户拥有的视图：</p>
                <pre><code>SELECT object_name FROM user_objects WHERE object_type='VIEW';
</code></pre>
                <h1>Oracle第十二章——索引、同义词、数据库链接、PL/SQL语句</h1>
                <h2 id="索引">索引</h2>
                <p><strong>索引(INDEX)是为了加快数据的查找而创建的数据库对象，特别是对大表，索引可以有效地提高查找速度，也可以保证数据的惟一性</strong></p>
                <p><strong>创建索引一般要掌握以下原则：只有较大的表才有必要建立索引，表的记录应该大于50条，查询数据小于总行数的2%～4%。虽然可以为表创建多个索引，但是无助于查询的索引不但不会提高效率，还会增加系统开销。因为当执行DML操作时，索引也要跟着更新，这时索引可能会降低系统的性能。</strong></p>
                <p>创建索引：</p>
                <pre><code> CREATE INDEX 索引名 ON 表名(列名);
</code></pre>
                <p>删除索引：</p>
                <pre><code>  DROP INDEX 索引名；
</code></pre>
                <h2 id="同义词">同义词</h2>
                <p><strong>同义词(SYNONYM)是为模式对象起的别名，可以为表、视图、序列、过程、函数和包等数据库模式对象创建同义词。</strong></p>
                <p>创建私有同义词：</p>
                <pre><code>  CREATE SYNONYM BOOK FOR 图书；
</code></pre>
                <p>创建公有同义词(先要获得创建公有同义词的权限)：</p>
                <pre><code>  CREATE PUBLIC SYNONYM BOOK FOR SCOTT.图书；
</code></pre>
                <p>删除同义词：</p>
                <pre><code>DROP SYNONYM 同义词名；
</code></pre>
                <h2 id="数据库链接">数据库链接</h2>
                <p><strong>数据库链接(DATABASE LINK)是在分布式环境下，为了访问远程数据库而创建的数据通信链路。</strong></p>
                <p>格式：</p>
                <pre><code> CREATE DATABASE LINK 链接名 CONNECT TO 账户 IDENTIFIED BY 口令 USING 服务名;
</code></pre>
                <p>数据库链接一旦建立并测试成功，就可以使用以下形式来访问远程用户的表。</p>
                <pre><code>	表名@数据库链接名
</code></pre>
                <h2 id="pl-sql">PL/sql</h2>
                <h3 id="1-块结构和基本语法要求">1、块结构和基本语法要求</h3>
                <p>块中各部分的作用解释如下：</p>
                <pre><code>	(1)  DECLARE：声明部分标志。
	(2)  BEGIN：可执行部分标志。
	(3)  EXCEPTION：异常处理部分标志。
	(4)  END；：程序结束标志。
</code></pre>
                <h3 id="2-输出">2、输出</h3>
                <p>第一种形式：</p>
                <pre><code>	DBMS_OUTPUT.PUT(字符串表达式)；
</code></pre>
                <p>第二种形式：</p>
                <pre><code>	DBMS_OUTPUT.PUT_LINE(字符串表达式)；
</code></pre>
                <p>第三种形式：</p>
                <pre><code>	DBMS_OUTPUT.NEW_LINE；
</code></pre>
                <h3 id="3-变量赋值：">3、变量赋值：</h3>
                <p>第一种形式：</p>
                <pre><code>SELECT 列名1，列名2... INTO 变量1，变量2... FROM 表名 WHERE 条件；第二种形式：变量名:=值
</code></pre>
                <p>例：查询雇员编号为7788的雇员姓名和工资。</p>
                <pre><code>SET SERVEROUTPUT ON		--在命令行界面必须写
DECLARE--定义部分标识		
 v_name  VARCHAR2(10);	--定义字符串变量v_name
 v_sal   NUMBER(5);	--定义数值变量v_sal
BEGIN			--可执行部分标识SELECT	 ename,sal INTO v_name,v_sal 
 FROM emp 
 WHERE empno=7788;--在程序中插入的SQL语句
DBMS_OUTPUT.PUT_LINE('7788号雇员是：'||v_name||'，工资为：'||to_char(v_sal));
		--输出雇员名和工资		
END;	
</code></pre>
                <h3 id="4-结合变量的定义和使用-即全局变量">4、结合变量的定义和使用（即全局变量）</h3>
                <p><em><em>该变量是在整个SQL</em>Plus环境下有效的变量，在退出SQL</em>Plus之前始终有效，所以可以使用该变量在不同的程序之间传递信息。结合变量不是由程序定义的，而是使用系统命令VARIABLE定义的。**</p>
                <p>例：定义并使用结合变量</p>
                <p>步骤1：输入和执行下列命令，定义结合变量g_ename：</p>
                <pre><code>--SET SERVEROUTPUT ON 
	VARIABLE  g_ename VARCHAR2(100)		
BEGIN
	:g_ename:=:g_ename|| 'Hello~ ';			--在程序中使用结合变量
	DBMS_OUTPUT.PUT_LINE(:g_ename);                --输出结合变量的值
END;
</code></pre>
                <h3 id="5-记录变量的定义">5．记录变量的定义</h3>
                <p><strong>还可以根据表或视图的一个记录中的所有字段定义变量，称为记录变量。记录变量包含若干个字段，在结构上同表的一个记录相同，定义方法是在表名后跟%ROWTYPE。记录变量的字段名就是表的字段名，数据类型也一致。</strong></p>
                <p>如：</p>
                <pre><code> v_name emp.ename%TYPE;
</code></pre>
                <h1>Oracle第十三章——PL/SQL空值语句、游标</h1>
                <h2 id="if语句">IF语句</h2>
                <h3 id="1-if-then-end-if形式">1、IF-THEN-END IF形式</h3>
                <pre>
   IF 条件 then 
       语句集;
   END IF;
</pre>
                <h3 id="2-if-then-else-end-if形式">2、IF-THEN-ELSE-END IF形式</h3>
                <pre>
   IF 条件 then 
       语句集1;
   ElSE
       语句集2
   END IF;
</pre>
                <h3 id="3-if-then-elsif-else-end-if形式">3．IF-THEN-ELSIF-ELSE-END IF形式</h3>
                <pre>
   IF 条件1 THEN
	语句集1;
   ELSIF 条件2 THEN
	语句集2;
   ELSIF 条件3 THEN
	语句集3;
   ...
   ELSE
	语句集n;
   END IF;
</pre>
                <h2 id="case语句">CASE语句</h2>
                <h3 id="1-基本case结构">1．基本CASE结构</h3>
                <pre>
   CASE 变量或表达式
   When 值1 then 结果1;
   When 值2 then 结果2;
   When 值3 then 结果3;
   ...
   ELSE 结果n;
   END CASE;
</pre>
                <h3 id="2-搜索case结构">2.搜索CASE结构</h3>
                <pre>
  CASE 
   When 条件1 then 结果1;
   When 条件2 then 结果2;
   When 条件3 then 结果3;
   ...
   ELSE 结果n;
   END CASE;
</pre>
                <h2 id="循环">循环</h2>
                <h3 id="1-基本loop循环">1．基本LOOP循环</h3>
                <pre>
   loop
      语句集;
   exit when 条件
      语句集;
   end loop;
</pre>
                <h3 id="2-for-loop循环">2.FOR LOOP循环</h3>
                <p>FOR循环是固定次数循环，格式如下：</p>
                <pre>	
FOR 控制变量 in [REVERSE] 下限..上限 		
LOOP  		 
	语句集;  		
END LOOP;
</pre>
                <p><em>注：循环控制变量是隐含定义的，不需要声明。</em></p>
                <p><strong>下限和上限用于指明循环次数。正常情况下循环控制变量的取值由下限到上限递增，REVERSE关键字表示循环控制变量的取值由上限到下限递减。</strong></p>
                <h2 id="3-while-loop循环">3．WHILE LOOP循环</h2>
                <pre>
   while 条件 loop
       语句集;
   end loop;
</pre>
                <h2 id="游标">游标</h2>
                <h3 id="1-概念">1、概念</h3>
                <p><strong>游标是SQL的一个内存工作区，由系统或用户以变量的形式定义。游标的作用就是用于临时存储从数据库中提取的数据块。在某些情况下，需要把数据从存放在磁盘的表中调到计算机内存中进行处理，最后将处理结果显示出来或最终写回数据库。这样数据处理的速度才会提高，否则频繁的磁盘数据交换会降低效率。</strong></p>
                <p>游标有两种类型：显式游标和隐式游标。</p>
                <p>在前述程序中用到的SELECT…INTO…查询语句，一次只能从数据库中提取一行数据，系统都会使用一个隐式游标。</p>
                <p>显式游标对应一个返回结果为多行多列的SELECT语句。</p>
                <p>游标一旦打开，数据就从数据库中传送到游标变量中，然后应用程序再从游标变量中分解出需要的数据，并进行处理。</p>
                <h3 id="2-隐式游标属性">2、隐式游标属性</h3>
                <table>
                  <thead>
                    <tr>
                      <th>隐式游标的属性</th>
                      <th>返回值类型</th>
                      <th>意义</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>SQL%ROWCOUNT</td>
                      <td>整型</td>
                      <td>代表DML语句成功执行的数据行数</td>
                    </tr>
                    <tr>
                      <td>SQL%FOUND</td>
                      <td>布尔型</td>
                      <td>值为TRUE代表插入、删除、更新或单行查询操作成功</td>
                    </tr>
                    <tr>
                      <td>SQL%NOTFOUND</td>
                      <td>布尔型</td>
                      <td>与SQL%FOUND属性返回值相反</td>
                    </tr>
                    <tr>
                      <td>SQL%ISOPEN</td>
                      <td>布尔型</td>
                      <td>DML执行过程中为真，结束后为假</td>
                    </tr>
                  </tbody>
                </table>
                <p>如：使用隐式游标的属性，判断对雇员工资的修改是否成功。</p>
                <pre><code>SET SERVEROUTPUT ON 		
BEGIN  		
UPDATE emp SET sal=sal+100 WHERE empno=1234;		 
IF SQL%FOUND THEN  		
DBMS_OUTPUT.PUT_LINE('成功修改雇员工资！');  		
COMMIT;  		
ELSEDBMS_OUTPUT.PUT_LINE('修改雇员工资失败！');		 
END IF; 		
END;
</code></pre>
                <h3 id="3-显式游标">3、显式游标</h3>
                <p>游标的使用分成以下4个步骤。</p>
                <h4 id="a-声明游标">a．声明游标</h4>
                <p>在DECLEAR部分按以下格式声明游标：</p>
                <pre><code>CURSOR 游标名[(参数1 数据类型[，参数2 数据类型...])]		 
IS SELECT语句;
</code></pre>
                <p>参数是可选部分，所定义的参数可以出现在SELECT语句的WHERE子句中。如果定义了参数，则必须在打开游标时传递相应的实际参数。</p>
                <h4 id="b-打开游标">b.打开游标</h4>
                <p>在可执行部分，按以下格式打开游标：</p>
                <pre><code>OPEN 游标名[(实际参数1[，实际参数2...])];
</code></pre>
                <p>打开游标时，SELECT语句的查询结果就被传送到了游标工作区。</p>
                <h4 id="c-提取数据">c.提取数据</h4>
                <p>在可执行部分，按以下格式将游标工作区中的数据取到变量中。提取操作必须在打开游标之后进行。</p>
                <pre><code>FETCH 游标名 INTO 变量名1[，变量名2...];
</code></pre>
                <p>或</p>
                <pre><code>FETCH 游标名 INTO 记录变量;
</code></pre>
                <p>游标打开后有一个指针指向数据区，FETCH语句一次返回指针所指的一行数据，要返回多行需重复执行，可以使用循环语句来实现。控制循环可以通过判断游标的属性来进行。</p>
                <p>定义记录变量的方法如下：</p>
                <pre><code>     变量名 表名|游标名%ROWTYPE；
</code></pre>
                <h4 id="d-关闭游标">d.关闭游标</h4>
                <pre><code>CLOSE 游标名;
</code></pre>
                <p>显式游标打开后，必须显式地关闭。游标一旦关闭，游标占用的资源就被释放，游标变成无效，必须重新打开才能使用。</p>
                <p>【例1】 用游标提取emp表中7788雇员的名称和职务。</p>
                <pre><code>SET SERVEROUTPUT ON	     --在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
DECLARE		
    v_ename VARCHAR2(10);	
    v_job VARCHAR2(10);	
    CURSOR emp_cursor IS 
 SELECT ename,job FROM emp WHERE empno=7788;
BEGIN
    OPEN emp_cursor;
    FETCH emp_cursor INTO v_ename,v_job;	
    DBMS_OUTPUT.PUT_LINE(v_ename||','||v_job);
    CLOSE emp_cursor;	
END;
</code></pre>
                <p>【例2】 用游标提取emp表中7788雇员的姓名、职务和工资。</p>
                <pre><code>SET SERVEROUTPUT ON	     --在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
DECLARE	 
	CURSOR emp_cursor IS  SELECT ename,job,sal FROM emp WHERE empno=7788;
	emp_record emp_cursor%ROWTYPE;
	    --用游标定义记录变量	
BEGIN 
	OPEN emp_cursor;	
	FETCH emp_cursor INTO emp_record;  
	 DBMS_OUTPUT.PUT_LINE(emp_record.ename||','|| emp_record.job||','|| emp_record.sal);	
	 CLOSE emp_cursor;	
END;
</code></pre>
                <p>【例3】 显示工资最高的前3名雇员的名称和工资。</p>
                <pre><code>SET SERVEROUTPUT ON		   --在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
DECLARE	
	 V_ename VARCHAR2(10);	
	V_sal NUMBER(5);	
	CURSOR emp_cursor IS  SELECT ename,sal FROM emp ORDER BY sal DESC;	
BEGIN	
	 OPEN emp_cursor;
	 FOR I IN 1..3 LOOP  
		 FETCH emp_cursor INTO v_ename,v_sal;
		 DBMS_OUTPUT.PUT_LINE(v_ename||','||v_sal);
  END LOOP;
   CLOSE emp_cursor;
END;
</code></pre>
                <h3 id="4-游标循环-重点">4、游标循环（重点）</h3>
                <p>方法一：使用特殊的FOR循环形式显示全部雇员的编号和名称(省略掉定义记录变量、打开游标、提取数据、关闭游标)。</p>
                <pre><code>SET SERVEROUTPUT ON     --在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
DECLARE
 	CURSOR emp_cursor IS 
 SELECT empno, ename FROM emp;
BEGIN	
	FOR Emp_record IN emp_cursor LOOP   
		 DBMS_OUTPUT.PUT_LINE(Emp_record.empno|| Emp_record.ename);
	END LOOP;
END;
</code></pre>
                <p>方法二：最简单方式</p>
                <pre><code>SET SERVEROUTPUT ON      --在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
BEGIN	 FOR re IN (SELECT ename FROM EMP)  LOOP
		DBMS_OUTPUT.PUT_LINE(re.ename)
	END LOOP;
END;
</code></pre>
                <h3 id="5-利用游标属性做循环条件">5、利用游标属性做循环条件</h3>
                <p>【训练1】 使用游标的属性练习。</p>
                <pre><code>SET SERVEROUTPUT ON         --在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
DECLARE
  V_ename VARCHAR2(10);
  CURSOR emp_cursor IS 
  SELECT ename FROM emp;
BEGIN	
  OPEN emp_cursor;	 
  IF emp_cursor%ISOPEN THEN
  LOOP
    FETCH emp_cursor INTO v_ename;	        
    EXIT WHEN emp_cursor%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(to_char(emp_cursor%ROWCOUNT)||'-'||v_ename);	        END LOOP;
  ELSE
    DBMS_OUTPUT.PUT_LINE('用户信息：游标没有打开！');
  END IF;         
  CLOSE  emp_cursor;
END;
</code></pre>
                <h1>Oracle第十四章——游标、存储过程</h1>
                <h2 id="游标参数的传递">游标参数的传递</h2>
                <p>例：</p>
                <pre><code>SET SERVEROUTPUT ON
DECLARE
    V_empno NUMBER(5);
	V_ename VARCHAR2(10);
	CURSOR 	emp_cursor(p_deptno NUMBER,p_job VARCHAR2) IS SELECT empno,ename FROM emp WHERE	deptno = p_deptno AND job = p_job;
BEGIN
 	OPEN emp_cursor(10, 'CLERK');
  	LOOP
  	   FETCH emp_cursor INTO v_empno,v_ename;
  	EXIT WHEN emp_cursor%NOTFOUND;
  	   DBMS_OUTPUT.PUT_LINE(v_empno||','||v_ename);
	END LOOP;
END; 
</code></pre>
                <h2 id="异常处理">异常处理</h2>
                <p>错误处理的语法如下：</p>
                <pre><code>     EXCEPTION
	WHEN 错误1[OR 错误2] THEN 语句序列1;
	WHEN 错误3[OR 错误4] THEN 语句序列2;
	...
	WHEN OTHERS 语句序列n;
      END;
</code></pre>
                <p>例：SET SERVEROUTPUT ON</p>
                <pre><code>DECLARE
    v_name VARCHAR2(10);
BEGIN
    SELECT	ename  INTO v_name  FROM emp  WHERE	empno = 1234;
DBMS_OUTPUT.PUT_LINE('该雇员名字为：'|| v_name);
EXCEPTION
	WHEN NO_DATA_FOUND THEN	DBMS_OUTPUT.PUT_LINE('编号错误，没有找到相应雇员！');
	WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE('发生其他错误！');
END;
</code></pre>
                <h2 id="存储过程">存储过程</h2>
                <h3 id="创建和删除存储过程">创建和删除存储过程</h3>
                <p>格式：</p>
                <pre><code> CREATE [OR REPLACE] PROCEDURE 存储过程名[(参数[IN|OUT|IN OUT] 数据类型...)]
{AS|IS}
	[说明部分]   --定义需要使用的临时变量
BEGIN
	语句集;
	[EXCEPTION]
	    [错误处理部分]
END [过程名];
</code></pre>
                <p>删除：</p>
                <pre><code>drop procedure 存储过程名;
</code></pre>
                <h3 id="调用存储过程">调用存储过程</h3>
                <p>方法1：</p>
                <pre><code>  EXECUTE 模式名.存储过程名[(参数...)];   (适用于命今行窗口及sql窗口)
</code></pre>
                <p>方法2： (适用于sql窗口)</p>
                <pre><code>	BEGIN
	      模式名.存储过程名[(参数...)];
	END;
</code></pre>
                <p>例：编写显示雇员信息的存储过程EMP_LIST，并引用EMP_COUNT存储过程(无参存储过程 )。</p>
                <pre><code>CREATE OR REPLACE PROCEDURE EMP_LIST
AS
       CURSOR emp_cursor IS SELECT empno,ename FROM emp;
BEGIN
	FOR Emp_record IN emp_cursor LOOP   
		DBMS_OUTPUT.PUT_LINE(Emp_record.empno||Emp_record.ename);
	END LOOP;
	EMP_COUNT;
END;

调用：begin
	EMP_LIST;
          end;
</code></pre>
                <h3 id="参数传递">参数传递</h3>
                <p>a.输入参数: 参数名 IN 数据类型 DEFAULT 值；</p>
                <pre><code>例：编写给雇员增加工资的存储过程CHANGE_SALARY，通过IN类型的参数传递要增加工资的雇员编号和增加的工资额。

	CREATE OR REPLACE PROCEDURE CHANGE_SALARY(P_EMPNO IN NUMBER DEFAULT 7788,P_RAISE NUMBER DEFAULT 10)  --形参P_EMPNO及P_RAISE
	AS
	   V_ENAME VARCHAR2(10);
	   V_SAL NUMBER(5);
	BEGIN
	   SELECT ENAME,SAL INTO V_ENAME,V_SAL FROM EMP WHERE EMPNO=P_EMPNO;
	   UPDATE EMP SET SAL=SAL+P_RAISE WHERE EMPNO=P_EMPNO;
	   DBMS_OUTPUT.PUT_LINE('雇员'||V_ENAME||'的工资被改为'||TO_CHAR(V_SAL+P_RAISE));
	   COMMIT;
	EXCEPTION
	  WHEN OTHERS THEN DBMS_OUTPUT.PUT_LINE('发生错误，修改失败！');
	  ROLLBACK; --如果出了异常则撤消
	END;

调用：begin
	CHANGE_SALARY(7788,80)
      end;
</code></pre>
                <p>b.输出参数: 参数名 OUT 数据类型 DEFAULT 值；</p>
                <pre><code>    --例：统计雇员的人数
       CREATE OR REPLACE PROCEDURE EMP_COUNT(P_TOTAL OUT NUMBER)   --P_TOTAL为输出参数
	AS
   BEGIN
	SELECT COUNT(*) INTO P_TOTAL FROM EMP;
   END;

调用：DECLARE
	 V_EMPCOUNT NUMBER;   --定义变量接收过程求出的结果
      BEGIN
	 EMP_COUNT(V_EMPCOUNT);
	 DBMS_OUTPUT.PUT_LINE('雇员总人数为：'||V_EMPCOUNT);
      END;
</code></pre>
                <p>c.输入输出参数： 参数名 IN OUT 数据类型 DEFAULT 值；</p>
                <pre><code>	--例：使用IN OUT类型的参数，给电话号码增加区码。
	CREATE OR REPLACE PROCEDURE ADD_REGION(P_HPONE_NUM IN OUT VARCHAR2)
	AS
	BEGIN
	   P_HPONE_NUM:='024-'||P_HPONE_NUM;
	END;

调用： DECLARE
	 V_PHONE_NUM VARCHAR2(15);
       BEGIN
	 V_PHONE_NUM:='26731092';
	 ADD_REGION(V_PHONE_NUM);
	 DBMS_OUTPUT.PUT_LINE('新的电话号码：'||V_PHONE_NUM);
       END;
</code></pre>
                <p><br><br>本文链接： <a href="http://www.meng.uno/articles/33c755f8/">http://www.meng.uno/articles/33c755f8/</a> 欢迎转载！</p>

              </div>
              <footer class="article-footer">

                <!-- Go to www.addthis.com/dashboard to customize your tools -->

                <div id="wpac-rating" style="margin: 10px auto; text-align:center;"></div>
                <script type="text/javascript">
                  wpac_init = window.wpac_init || [];
                  wpac_init.push({
                    widget: 'Rating',
                    id: 9986
                  });
                  (function() {
                    if ('WIDGETPACK_LOADED' in window) return;
                    WIDGETPACK_LOADED = true;
                    var mc = document.createElement('script');
                    mc.type = 'text/javascript';
                    mc.async = true;
                    mc.src = 'https://embed.widgetpack.com/widget.js';
                    var s = document.getElementsByTagName('script')[0];
                    s.parentNode.insertBefore(mc, s.nextSibling);
                  })();
                </script>

                <div id="donation_div"></div>

                <script src="/js/vdonate.js"></script>
                <script>
                  var a = new Donate({
                    title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!', // 可选参数，打赏标题
                    btnText: '打赏支持', // 可选参数，打赏按钮文字
                    el: document.getElementById('donation_div'),
                    wechatImage: 'http://www.meng.uno/money/wechat.JPG',
                    alipayImage: 'http://www.meng.uno/money/alipay.JPG'
                  });
                </script>


                <div id="comment">
                  <!-- 来必力City版安装代码 -->
                  <div id="lv-container" data-id="city" data-uid="MTAyMC8zNDA2OC8xMDYwNg==">
                    <script type="text/javascript">
                      (function(d, s) {
                        var j, e = d.getElementsByTagName(s)[0];

                        if (typeof LivereTower === 'function') {
                          return;
                        }

                        j = d.createElement(s);
                        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                        j.async = true;

                        e.parentNode.insertBefore(j, e);
                      })(document, 'script');
                    </script>
                    <noscript>为正常使用评论功能请激活JavaScript</noscript>
                  </div>
                  <!-- City版安装代码已完成 -->
                </div>

                <ul class="article-tag-list">
                  <li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li>
                  <li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Oracle/">Oracle</a></li>
                </ul>
              </footer>
            </div>

            <nav id="article-nav">

              <a href="/articles/7203e497/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          CNN
        
      </div>
    </a>


              <a href="/articles/8193f764/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">深度学习核心</div>
    </a>

            </nav>

          </article>

          <!-- Table of Contents -->

          <aside id="toc-sidebar">
            <div id="toc" class="toc-article">
              <strong class="toc-title">目录导航</strong>

              <ol class="nav">
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">1.</span> <span class="nav-text">Oracle第一章</span></a></li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">2.</span> <span class="nav-text">Oracle第二章</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#创建表空间"><span class="nav-number">2.1.</span> <span class="nav-text">创建表空间</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#创建用户"><span class="nav-number">2.2.</span> <span class="nav-text">创建用户</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#给用户授权"><span class="nav-number">2.3.</span> <span class="nav-text">给用户授权</span></a></li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">3.</span> <span class="nav-text">Oracle第三章</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#基本查询"><span class="nav-number">3.1.</span> <span class="nav-text">基本查询</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#行号-rownum"><span class="nav-number">3.2.</span> <span class="nav-text">行号（rownum）</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#查询进行计算"><span class="nav-number">3.3.</span> <span class="nav-text">查询进行计算</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#使用别名"><span class="nav-number">3.4.</span> <span class="nav-text">使用别名</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#连接运算符"><span class="nav-number">3.5.</span> <span class="nav-text">连接运算符</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#六-消除重复行-distinct"><span class="nav-number">3.6.</span> <span class="nav-text">六、消除重复行（distinct）</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#排序"><span class="nav-number">3.7.</span> <span class="nav-text">排序</span></a></li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">4.</span> <span class="nav-text">Oracle第四章——条件查询、字符型函数</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#条件查询"><span class="nav-number">4.1.</span> <span class="nav-text">条件查询</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">4.2.</span> <span class="nav-text">函数</span></a></li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">5.</span> <span class="nav-text">Oracle第五章——函数</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#日期型函数"><span class="nav-number">5.1.</span> <span class="nav-text">日期型函数</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#转换函数"><span class="nav-number">5.2.</span> <span class="nav-text">转换函数</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#其他常用函数"><span class="nav-number">5.3.</span> <span class="nav-text">其他常用函数</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-空值的转换"><span class="nav-number">5.3.1.</span> <span class="nav-text">1．空值的转换</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-decode函数"><span class="nav-number">5.3.2.</span> <span class="nav-text">2．decode函数</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-最大-最小值函数"><span class="nav-number">5.3.3.</span> <span class="nav-text">3．最大、最小值函数</span></a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">6.</span> <span class="nav-text">Oracle第六章——相等、外连接</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#相等连接"><span class="nav-number">6.1.</span> <span class="nav-text">相等连接</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-三个步骤"><span class="nav-number">6.1.1.</span> <span class="nav-text">1、三个步骤</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-inner-join-的写法"><span class="nav-number">6.1.2.</span> <span class="nav-text">2、inner join 的写法</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-三表或三表以上的写法"><span class="nav-number">6.1.3.</span> <span class="nav-text">3、三表或三表以上的写法</span></a></li>
                      </ol>
                    </li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#外连接-不等连接"><span class="nav-number">6.2.</span> <span class="nav-text">外连接（不等连接）</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-写法1"><span class="nav-number">6.2.1.</span> <span class="nav-text">1、写法1</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-写法2"><span class="nav-number">6.2.2.</span> <span class="nav-text">2、写法2</span></a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">7.</span> <span class="nav-text">Oracle第七章——连接、分组查询</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#不等连接"><span class="nav-number">7.1.</span> <span class="nav-text">不等连接</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#自连接"><span class="nav-number">7.2.</span> <span class="nav-text">自连接</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#组函数"><span class="nav-number">7.3.</span> <span class="nav-text">组函数</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#分组查询"><span class="nav-number">7.4.</span> <span class="nav-text">分组查询</span></a></li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">8.</span> <span class="nav-text">Oracle第八章——子查询</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#子查询"><span class="nav-number">8.1.</span> <span class="nav-text">子查询</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-单行子查询"><span class="nav-number">8.1.1.</span> <span class="nav-text">1、单行子查询</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-多行子查询"><span class="nav-number">8.1.2.</span> <span class="nav-text">2、多行子查询*</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-多列子查询"><span class="nav-number">8.1.3.</span> <span class="nav-text">3.多列子查询</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#4-在from从句中使用子查询"><span class="nav-number">8.1.4.</span> <span class="nav-text">4．在FROM从句中使用子查询</span></a></li>
                      </ol>
                    </li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#集合运算"><span class="nav-number">8.2.</span> <span class="nav-text">集合运算</span></a></li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">9.</span> <span class="nav-text">Oracle第九章——增删改、序列、事务</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#增删改"><span class="nav-number">9.1.</span> <span class="nav-text">增删改</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#复制数据"><span class="nav-number">9.2.</span> <span class="nav-text">复制数据</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#序列"><span class="nav-number">9.3.</span> <span class="nav-text">序列</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-创建序列"><span class="nav-number">9.3.1.</span> <span class="nav-text">1、创建序列</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-使用序列"><span class="nav-number">9.3.2.</span> <span class="nav-text">2、使用序列</span></a></li>
                      </ol>
                    </li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#事务"><span class="nav-number">9.4.</span> <span class="nav-text">事务</span></a></li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">10.</span> <span class="nav-text">Oracle第十章————建表</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#建表"><span class="nav-number">10.1.</span> <span class="nav-text">建表</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#通过子查询建表"><span class="nav-number">10.2.</span> <span class="nav-text">通过子查询建表</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#添加表的约束"><span class="nav-number">10.3.</span> <span class="nav-text">添加表的约束</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#方法一：建表的同时添加约束"><span class="nav-number">10.3.1.</span> <span class="nav-text">方法一：建表的同时添加约束</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#方法二：建表完成后-再添加约束"><span class="nav-number">10.3.2.</span> <span class="nav-text">方法二：建表完成后，再添加约束</span></a></li>
                      </ol>
                    </li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#查看约束条件"><span class="nav-number">10.4.</span> <span class="nav-text">查看约束条件</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#删除约束条件"><span class="nav-number">10.5.</span> <span class="nav-text">删除约束条件</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#表的操作"><span class="nav-number">10.6.</span> <span class="nav-text">表的操作</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#修改表"><span class="nav-number">10.7.</span> <span class="nav-text">修改表</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-增加新列"><span class="nav-number">10.7.1.</span> <span class="nav-text">1、增加新列:</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-修改列"><span class="nav-number">10.7.2.</span> <span class="nav-text">2、修改列</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-删除列"><span class="nav-number">10.7.3.</span> <span class="nav-text">3、删除列</span></a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">11.</span> <span class="nav-text">Oracle第十一章————视图</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#分区表"><span class="nav-number">11.1.</span> <span class="nav-text">分区表</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#视图"><span class="nav-number">11.2.</span> <span class="nav-text">视图</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-视图的概念"><span class="nav-number">11.2.1.</span> <span class="nav-text">1、视图的概念</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-格式："><span class="nav-number">11.2.2.</span> <span class="nav-text">2、格式：</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-创建只读视图"><span class="nav-number">11.2.3.</span> <span class="nav-text">3．创建只读视图</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#4-使用with-check-option选项"><span class="nav-number">11.2.4.</span> <span class="nav-text">4．使用WITH CHECK OPTION选项</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#5-来自基表的限制"><span class="nav-number">11.2.5.</span> <span class="nav-text">5．来自基表的限制</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#6-视图的查看"><span class="nav-number">11.2.6.</span> <span class="nav-text">6.视图的查看</span></a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">12.</span> <span class="nav-text">Oracle第十二章——索引、同义词、数据库链接、PL/SQL语句</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#索引"><span class="nav-number">12.1.</span> <span class="nav-text">索引</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#同义词"><span class="nav-number">12.2.</span> <span class="nav-text">同义词</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#数据库链接"><span class="nav-number">12.3.</span> <span class="nav-text">数据库链接</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#pl-sql"><span class="nav-number">12.4.</span> <span class="nav-text">PL/sql</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-块结构和基本语法要求"><span class="nav-number">12.4.1.</span> <span class="nav-text">1、块结构和基本语法要求</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-输出"><span class="nav-number">12.4.2.</span> <span class="nav-text">2、输出</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-变量赋值："><span class="nav-number">12.4.3.</span> <span class="nav-text">3、变量赋值：</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#4-结合变量的定义和使用-即全局变量"><span class="nav-number">12.4.4.</span> <span class="nav-text">4、结合变量的定义和使用（即全局变量）</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#5-记录变量的定义"><span class="nav-number">12.4.5.</span> <span class="nav-text">5．记录变量的定义</span></a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">13.</span> <span class="nav-text">Oracle第十三章——PL/SQL空值语句、游标</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#if语句"><span class="nav-number">13.1.</span> <span class="nav-text">IF语句</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-if-then-end-if形式"><span class="nav-number">13.1.1.</span> <span class="nav-text">1、IF-THEN-END IF形式</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-if-then-else-end-if形式"><span class="nav-number">13.1.2.</span> <span class="nav-text">2、IF-THEN-ELSE-END IF形式</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-if-then-elsif-else-end-if形式"><span class="nav-number">13.1.3.</span> <span class="nav-text">3．IF-THEN-ELSIF-ELSE-END IF形式</span></a></li>
                      </ol>
                    </li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#case语句"><span class="nav-number">13.2.</span> <span class="nav-text">CASE语句</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-基本case结构"><span class="nav-number">13.2.1.</span> <span class="nav-text">1．基本CASE结构</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-搜索case结构"><span class="nav-number">13.2.2.</span> <span class="nav-text">2.搜索CASE结构</span></a></li>
                      </ol>
                    </li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#循环"><span class="nav-number">13.3.</span> <span class="nav-text">循环</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-基本loop循环"><span class="nav-number">13.3.1.</span> <span class="nav-text">1．基本LOOP循环</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-for-loop循环"><span class="nav-number">13.3.2.</span> <span class="nav-text">2.FOR LOOP循环</span></a></li>
                      </ol>
                    </li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#3-while-loop循环"><span class="nav-number">13.4.</span> <span class="nav-text">3．WHILE LOOP循环</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#游标"><span class="nav-number">13.5.</span> <span class="nav-text">游标</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#1-概念"><span class="nav-number">13.5.1.</span> <span class="nav-text">1、概念</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#2-隐式游标属性"><span class="nav-number">13.5.2.</span> <span class="nav-text">2、隐式游标属性</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#3-显式游标"><span class="nav-number">13.5.3.</span> <span class="nav-text">3、显式游标</span></a>
                          <ol class="nav-child">
                            <li class="nav-item nav-level-4"><a class="nav-link" href="#a-声明游标"><span class="nav-number">13.5.3.1.</span> <span class="nav-text">a．声明游标</span></a></li>
                            <li class="nav-item nav-level-4"><a class="nav-link" href="#b-打开游标"><span class="nav-number">13.5.3.2.</span> <span class="nav-text">b.打开游标</span></a></li>
                            <li class="nav-item nav-level-4"><a class="nav-link" href="#c-提取数据"><span class="nav-number">13.5.3.3.</span> <span class="nav-text">c.提取数据</span></a></li>
                            <li class="nav-item nav-level-4"><a class="nav-link" href="#d-关闭游标"><span class="nav-number">13.5.3.4.</span> <span class="nav-text">d.关闭游标</span></a></li>
                          </ol>
                        </li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#4-游标循环-重点"><span class="nav-number">13.5.4.</span> <span class="nav-text">4、游标循环（重点）</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#5-利用游标属性做循环条件"><span class="nav-number">13.5.5.</span> <span class="nav-text">5、利用游标属性做循环条件</span></a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">14.</span> <span class="nav-text">Oracle第十四章——游标、存储过程</span></a>
                  <ol class="nav-child">
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#游标参数的传递"><span class="nav-number">14.1.</span> <span class="nav-text">游标参数的传递</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#异常处理"><span class="nav-number">14.2.</span> <span class="nav-text">异常处理</span></a></li>
                    <li class="nav-item nav-level-2"><a class="nav-link" href="#存储过程"><span class="nav-number">14.3.</span> <span class="nav-text">存储过程</span></a>
                      <ol class="nav-child">
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#创建和删除存储过程"><span class="nav-number">14.3.1.</span> <span class="nav-text">创建和删除存储过程</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#调用存储过程"><span class="nav-number">14.3.2.</span> <span class="nav-text">调用存储过程</span></a></li>
                        <li class="nav-item nav-level-3"><a class="nav-link" href="#参数传递"><span class="nav-number">14.3.3.</span> <span class="nav-text">参数传递</span></a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
              </ol>

            </div>
          </aside>
        </section>

      </div>


      <footer id="footer">


        <div class="container">
          <div class="row">
            <p id="copyRightEn">&copy; 2018.02.08 - 2019.03.20 <a href="http://www.meng.uno/">匡盟盟</a>&nbsp;<i class="fas fa-cogs"></i> 保留所有权利！</p>

            <p class="busuanzi_uv">

              访客数 : <span id="busuanzi_value_site_uv"></span> | 访问量 : <span id="busuanzi_value_site_pv"></span>

            </p>


            <p id="hitokoto">:D 获取中...</p>
            <!-- 以下写法，选取一种即可 -->

            <!-- 现代写法，推荐 -->
            <!-- 兼容低版本浏览器 (包括 IE)，可移除 -->
            <script src="https://cdn.bootcss.com/bluebird/3.5.1/bluebird.core.min.js"></script>
            <script src="https://cdn.bootcss.com/fetch/2.0.3/fetch.min.js"></script>
            <!--End-->
            <script>
              fetch('https://v1.hitokoto.cn')
                .then(function(res) {
                  return res.json();
                })
                .then(function(data) {
                  var hitokoto = document.getElementById('hitokoto');
                  hitokoto.innerText = data.hitokoto;
                })
                .catch(function(err) {
                  console.error(err);
                })
            </script>

            <a href="http://webscan.360.cn/index/checkwebsite/url/www.meng.uno"><img border="0" height=27px width=74px src="/css/images/webscan.png"/></a>
            <!-- <img border="0" height=27px width=109px style="background-color:white;"src="/css/images/kaba.png"/> -->
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" height=27px style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
            <script type="text/javascript">
              var locationUrl = escape(document.location.href);
              document.write(unescape("%3Cscript") + " height='27px' width='74px' charset='utf-8' src='http://union.rising.com.cn//InfoManage/TrojanInspect.aspx?p1=XNk3xHG5v8uxFHYb4KaGpnyWjJlbHp7K&p2=RqCQt7iMKRw=&p3=XNk3xHG5v8vv3Z1xqd/V8w==&url=" + locationUrl + "' type='text/javascript'" + unescape("%3E%3C/script%3E"));
            </script>
          </div>

        </div>
      </footer>


      <!-- min height -->

      <script>
        var wrapdiv = document.getElementById("wrap");
        var contentdiv = document.getElementById("content");
        var allheader = document.getElementById("allheader");

        wrapdiv.style.minHeight = document.body.offsetHeight + "px";
        if (allheader != null) {
          contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
        } else {
          contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
        }
      </script>

      <script>
        (function() {
          var src = (document.location.protocol == "http:") ? "http://js.passport.qihucdn.com/11.0.1.js?5d3bca9f7d6a95532f3ebb56e3c6bf11" : "https://jspassport.ssl.qhimg.com/11.0.1.js?5d3bca9f7d6a95532f3ebb56e3c6bf11";
          document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
      </script>
    </div>
    <!-- <nav id="mobile-nav">

  <a href="/" class="mobile-nav-link">Home</a>

  <a href="/archives" class="mobile-nav-link">Archives</a>

  <a href="/categories" class="mobile-nav-link">Categories</a>

  <a href="/tags" class="mobile-nav-link">Tags</a>

  <a href="/about" class="mobile-nav-link">About</a>

  <a href="/comments" class="mobile-nav-link">Comments</a>

</nav> -->
    <!-- mathjax config similar to math.stackexchange -->

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({ tex2jax: { skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'] } });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() { var all = MathJax.Hub.getAllJax(), i; for(i=0; i
      < all.length; i +=1 ) { all[i].SourceElement().parentNode.className +=' has-jax' ; } }); </script>

        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>


        <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
        <script src="/fancybox/jquery.fancybox.pack.js"></script>


        <script src="/js/scripts.js"></script>




        <script src="/js/dialog.js"></script>


        <!-- Google Analytics -->
        <script type="text/javascript">
          (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
              (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
              m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
          })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

          ga('create', 'UA-113947925-1', 'auto');
          ga('send', 'pageview');
        </script>
        <!-- End Google Analytics -->


        <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
        </script>
  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="myModalLabel">设置</h2>
        </div>
        <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
        <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
        <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
            <div class="panel-body">
              您已调整页面字体大小
            </div>
          </div>
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
          </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
            <div class="panel-body">
              夜间模式已经开启，再次单击按钮即可关闭
            </div>
          </div>

          <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
          </div>
          <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
            <div class="panel-body">
              欢迎来到匡盟盟的博客！
            </div>
            <div class="panel-body">
              一个不满平凡的大龄码农
            </div>
            <div class="panel-body">
              © 2019 匡盟盟 All Rights Reserved.
            </div>
          </div>
        </div>


        <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
        <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
        <div class="modal-footer">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        </div>
      </div>
    </div>
  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>

  <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>



</body>
<style>
  .test-div {
    width: 300px;
    height: 300px;
    margin: 20px auto;
    border: 1px solid #aaa;
    position: relative;
  }
</style>

<script src="/js/loading.js"></script>
<script>
  function loading7() {
    $('body').loading({
      loadingWidth: 240,
      title: '请稍等!',
      name: 'test',
      discription: '精彩马上就来...',
      direction: 'row',
      type: 'origin',
      originBg: '#71EA71',
      originDivWidth: 30,
      originDivHeight: 30,
      originWidth: 4,
      originHeight: 4,
      smallLoading: false,
      titleColor: '#388E7A',
      loadingBg: '#312923',
      loadingMaskBg: 'rgba(22,22,22,0.2)'
    });
    setTimeout(function() {
      removeLoading('test');
    }, 1000);
  }
</script>

</html>