<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>欢迎来到我的博客！</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="匡盟盟, Colyn Kuang, Blog, 博客" />
  
  
  
  
  <meta name="description" content="Mengmeng Kuang&apos;s Blog!">
<meta property="og:type" content="website">
<meta property="og:title" content="欢迎来到我的博客！">
<meta property="og:url" content="http://meng.uno/index.html">
<meta property="og:site_name" content="欢迎来到我的博客！">
<meta property="og:description" content="Mengmeng Kuang&apos;s Blog!">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="欢迎来到我的博客！">
<meta name="twitter:description" content="Mengmeng Kuang&apos;s Blog!">
  
    <link rel="alternate" href="/atom.xml" title="欢迎来到我的博客！" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/logo.png">
  <link rel="apple-touch-icon" href="/css/images/logo.png">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/home.css" >
  

  

  

  

  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

</head>



  <body>


  
    <header id="header">

	<!-- 背景图模式 -->
	

    
      <div id="intrologo" class="intro-logo" style="background-position:center; background-repeat:no-repeat; background-image: url(); background-size: auto 100%;">

      <!-- Support rolling -->  
        
        <section class="awSlider">
          <div class="carousel slide carousel-fade " data-ride="carousel">

            <!-- Wrapper for slides -->
            <div class="carousel-inner">
               
                  
                    <div class="item active">
                  
                    <img id="carousel-img0" src="/css/images/home-bg.jpg">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img0 = new Image();
                      var imageTag0 = document.getElementById("carousel-img0");
                      img0.src = imageTag0.src;
                      img0.onload=function(){
                        if (img0.width / img0.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag0.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag0.style.height = document.body.clientHeight + "px";
                          imageTag0.style.marginLeft = -(document.body.clientHeight * img0.width / img0.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img1" src="/css/images/sample.jpg">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img1 = new Image();
                      var imageTag1 = document.getElementById("carousel-img1");
                      img1.src = imageTag1.src;
                      img1.onload=function(){
                        if (img1.width / img1.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag1.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag1.style.height = document.body.clientHeight + "px";
                          imageTag1.style.marginLeft = -(document.body.clientHeight * img1.width / img1.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img2" src="https://source.unsplash.com/collection/954550/1920x1080">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img2 = new Image();
                      var imageTag2 = document.getElementById("carousel-img2");
                      img2.src = imageTag2.src;
                      img2.onload=function(){
                        if (img2.width / img2.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag2.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag2.style.height = document.body.clientHeight + "px";
                          imageTag2.style.marginLeft = -(document.body.clientHeight * img2.width / img2.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href=".carousel" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Geri</span>
            </a>
            <a class="right carousel-control" href=".carousel" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">İleri</span>
            </a>
          </div>
        </section>
        <script>
          $('section.awSlider .carousel').carousel({
              pause: '',
              interval: 5000
          });
          var startImage = $('section.awSlider .item.active > img').attr('src');
          $('section.awSlider .carousel').on('slid.bs.carousel', function () {
              var bscn = $(this).find('.item.active > img').attr('src');
              $('section.awSlider > img').attr('src', bscn);
          });
        </script>
      

    
 


    <canvas width="100%" height="100%"></canvas>
    <script>
      var c = document.getElementsByTagName('canvas')[0],
          x = c.getContext('2d'),
          w = window.innerWidth,
          h = window.innerHeight,
          pr = window.devicePixelRatio || 1,
          f = 90,
          q,
          m = Math,
          r = 0,
          u = m.PI*2,
          v = m.cos,
          z = m.random
      c.width = w*pr
      c.height = h*pr
      x.scale(pr, pr)
      x.globalAlpha = 0.6

      <!-- 折线Polyline背景 -->
      
    </script>
    

    
      <div id="homelogo" class="homelogo" style="background: rgba(255,255,255,1);"> 
    

        
          <div class="homelogoback"  style="border: 1px solid #404040;" >
            <h1><a href="#content" id="logo">欢迎来到我的博客！</a></h1>
            <h3>Mengmeng Kuang&#39;s Blog!</h3>
            <h5>匡盟盟</h5>
            <!-- <p><a href="https://github.com/iTimeTraveler" target="_blank">Github</a></p> -->
          </div>
        
    
    </div>
  </div>

  <!-- 自适应主页背景大图 -->
  

 <!-- home_logo_image居中 -->
 
    <script>
        var homelogodiv = document.getElementById("homelogo");
        if (document.all.homelogo.offsetWidth > document.body.clientWidth) {
          homelogodiv.style.width = document.body.clientWidth + "px";
          homelogodiv.style.marginLeft = document.body.clientWidth * -0.5 + "px";
        } else {
          homelogodiv.style.width = homelogodiv.clientWidth  + "px";
          homelogodiv.style.marginLeft = (homelogodiv.clientWidth)  * -0.5 + "px";
        }
    </script>
  

  <div class="intro-navigate">
      <p class="navigater-list">
        
          <a id="beautifont" class="main-nav-link" href="/index.html">首页</a>
        
          <a id="beautifont" class="main-nav-link" href="/archives/">所有文章</a>
        
          <a id="beautifont" class="main-nav-link" href="/categories/">分类</a>
        
          <a id="beautifont" class="main-nav-link" href="/tags/">标签</a>
        
          <a id="beautifont" class="main-nav-link" href="/cv.html">关于我</a>
        
      </p>
  </div>

</header>
  
  <div id="container">
    <div id="wrap">
      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;">
  
    <article id="post-binsearch"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/02/08/binsearch/">二分查找的效率</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/02/08/binsearch/" class="article-date">
	  <time datetime="2018-02-08T09:20:00.000Z" itemprop="datePublished">2018-02-08</time>
	</a>

      
    <a class="article-category-link" href="/categories/算法-Java开发Tips/">算法, Java开发Tips</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法复杂性/">算法复杂性</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-substring"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/02/08/substring/">Java Substring() 的实现</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/02/08/substring/" class="article-date">
	  <time datetime="2018-02-08T07:43:08.000Z" itemprop="datePublished">2018-02-08</time>
	</a>

      
    <a class="article-category-link" href="/categories/Java开发Tips/">Java开发Tips</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>写过Java的人应该都用过<code>substring(int bedinIndex, int endIndex)</code>方法。我发现这个简单的方法在实现上居然经过了一次大的变革。</p>
<h2 id="substring-的用途"><a href="#substring-的用途" class="headerlink" title="substring()的用途"></a>substring()的用途</h2><p>代码:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String origin = "asdfg"; </span><br><span class="line">origin = origin.substring(1,3);</span><br><span class="line">System.out.println(origin);</span><br></pre></td></tr></table></figure>
<p>输出:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sd</span><br></pre></td></tr></table></figure>
<p>我们发现它能将原始字符串中从下标为beginIndex到endIndex-1之间的子串取出。那它是怎么实现的呢？</p>
<h2 id="substring-的实现"><a href="#substring-的实现" class="headerlink" title="substring()的实现"></a>substring()的实现</h2><blockquote>
<p>Java中的字符串有三个域：char value[], int offset以及int count，它们分别存储字符串的值，起始下标与长度。</p>
</blockquote>
<h3 id="JDK6版本"><a href="#JDK6版本" class="headerlink" title="JDK6版本"></a>JDK6版本</h3><p>在这个版本中，每次执行substring()方法时并不会新建新的string，仅仅只是将上述三个域中的offset，count做必要的修改。返回对象仍指向原来的数据。</p>
<p><img src="http://www.meng.uno/images/substring_jdk.png" alt="Substring()实现版本一"></p>
<p>这样一来，<strong><em>缺点</em></strong>就比较明显：当原始字符串比较长，而截取的子串比较短时，在后续的使用中就会浪费大量的空间。</p>
<h3 id="JDK7-版本"><a href="#JDK7-版本" class="headerlink" title="JDK7+版本"></a>JDK7+版本</h3><p>在上一个版本基础上，这个方法进行了改进，每次使用这个方法都会新建一个string对象，并将其返回。</p>
<p><img src="http://www.meng.uno/images/substring_jdk7.png" alt="Substring()实现版本二"></p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-hv6"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/01/29/hv6/">Analysis For Hyperkernel</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/01/29/hv6/" class="article-date">
	  <time datetime="2018-01-29T13:43:03.000Z" itemprop="datePublished">2018-01-29</time>
	</a>

      
    <a class="article-category-link" href="/categories/System/">System</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="State-machine-Specification"><a href="#State-machine-Specification" class="headerlink" title="State-machine Specification"></a>State-machine Specification</h2><p>State-machine specification means the system function will first verify the old procedure until the procedure is runnable and then return a new procedure and write to the system image. All of these must run in the user level. This specification consists of two parts: a definition of abstract kernel state, and a definition of trap handlers (e.g., system calls) in terms of abstract state transitions. They use fully automated technique to find bugs and this method is full functional verification if program is free of loops and state is finite.</p>
<p>The “hv6/hv6/spec/kernel/spec/specs.py” file contains the system calls which use this kind of specification. From the picture, we can see that they use Z3 to prove the correction of the “old” procedure and if it can transfer to a new state or it is runnable, it will return the new procedure so that it can be proved true.</p>
<h2 id="Declarative-Specification"><a href="#Declarative-Specification" class="headerlink" title="Declarative Specification"></a>Declarative Specification</h2><p>The authors also provide a declarative specification of the high level properties that the state-machine specification should satisfy. The verifier will check that these high level properties are indeed satisfied, helping increase the programmer’s confidence in the correctness of the state-machine specification. To improve confidence in its correctness, there is a higher-level declarative specification to better capture programmer intuition about kernel behavior, in the form of a conjunction of crosscutting properties that hold across all trap handlers.</p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/System-Verification/">System Verification</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-nlpc"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/10/30/nlpc/">中文分词小赛数据</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/10/30/nlpc/" class="article-date">
	  <time datetime="2017-10-30T08:02:41.000Z" itemprop="datePublished">2017-10-30</time>
	</a>

      
    <a class="article-category-link" href="/categories/NLP/">NLP</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>纪念一下大四组织的一次中文分词小比赛。</p>
</blockquote>
<h2 id="分项数据"><a href="#分项数据" class="headerlink" title="分项数据"></a>分项数据</h2><ul>
<li>训练数据： 链接: <a href="https://pan.baidu.com/s/1sl9JLqX" target="_blank" rel="noopener">https://pan.baidu.com/s/1sl9JLqX</a> 密码: 8am6</li>
<li>测试数据： 链接: <a href="https://pan.baidu.com/s/1eSeYhfO" target="_blank" rel="noopener">https://pan.baidu.com/s/1eSeYhfO</a> 密码: cnw2</li>
<li>相关参考答案： 链接: <a href="https://pan.baidu.com/s/1c2tVto0" target="_blank" rel="noopener">https://pan.baidu.com/s/1c2tVto0</a> 密码: 3rpt</li>
<li>有切分歧义的100个句子：链接: <a href="https://pan.baidu.com/s/1gfJ7Duz" target="_blank" rel="noopener">https://pan.baidu.com/s/1gfJ7Duz</a> 密码: 8mmx</li>
</ul>
<h2 id="所有数据"><a href="#所有数据" class="headerlink" title="所有数据"></a>所有数据</h2><p>所有文件下载：链接: <a href="https://pan.baidu.com/s/1gfJ7Duz" target="_blank" rel="noopener">https://pan.baidu.com/s/1gfJ7Duz</a> 密码: 8mmx</p>
<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><p>相关PPT：<a href="http://www.meng.uno/nlpc.pdf" target="_blank" rel="noopener">http://www.meng.uno/nlpc.pdf</a></p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/">NLP</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-js_dom"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/03/05/js_dom/">JavaScript操作DOM</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/03/05/js_dom/" class="article-date">
	  <time datetime="2017-03-05T08:03:01.000Z" itemprop="datePublished">2017-03-05</time>
	</a>

      
    <a class="article-category-link" href="/categories/前端/">前端</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h2><p>除了可以使用<code>createElement</code>创建元素，也可以使用<code>createTextNode</code>创建文本节点。<code>document.body</code>指向的是<code>&lt;body&gt;</code>元素，<code>document.documentElement</code>则指向<code>&lt;html&gt;</code>元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建节点</span></span><br><span class="line">   <span class="keyword">var</span> createNode = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">   <span class="keyword">var</span> createTextNode = <span class="built_in">document</span>.createTextNode(<span class="string">"hello world"</span>);</span><br><span class="line">   createNode.appendChild(createTextNode);</span><br><span class="line">   <span class="built_in">document</span>.body.appendChild(createNode);</span><br><span class="line">   <span class="built_in">document</span>.documentElement.appendChild(createNode);</span><br></pre></td></tr></table></figure>
<h2 id="插入节点"><a href="#插入节点" class="headerlink" title="插入节点"></a>插入节点</h2><p>可以使用appendChild，insertBefore，insertBefore接收两个参数，第一个是插入的节点，第二个是参照节点，如insertBefore(a,b)，则a会插入在b的前面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入节点</span></span><br><span class="line"> <span class="keyword">var</span> createNode = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line"><span class="keyword">var</span> createTextNode = <span class="built_in">document</span>.createTextNode(<span class="string">"hello world"</span>);</span><br><span class="line">createNode.appendChild(createTextNode);</span><br><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="built_in">document</span>.body.insertBefore(createNode,div1);</span><br></pre></td></tr></table></figure>
<h2 id="替换和删除元素"><a href="#替换和删除元素" class="headerlink" title="替换和删除元素"></a>替换和删除元素</h2><p>从replaceChild和removeChild的字面意思看，就是删除子节点，因此调用者，需要包含子节点div1，不然调用会报错。返回的节点是替换的或删除的元素，被替换/删除的元素仍然存在，但document中已经没有他们的位置了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//替换元素</span></span><br><span class="line">   <span class="keyword">var</span> replaceChild = <span class="built_in">document</span>.body.replaceChild(createNode,div1);</span><br><span class="line"><span class="comment">//删除元素</span></span><br><span class="line">    <span class="keyword">var</span> removeChild = <span class="built_in">document</span>.body.removeChild(div1);</span><br></pre></td></tr></table></figure>
<h2 id="节点的属性"><a href="#节点的属性" class="headerlink" title="节点的属性"></a>节点的属性</h2><ul>
<li>firstChild:第一个子节点</li>
<li>lastChild:最后一个子节点</li>
<li>childNodes:子节点集合，获取其中子节点可</li>
<li>someNode.childNodes[index]或</li>
<li>someNode.childNodes.item(index)</li>
<li>nextSibling:下一个兄弟节点</li>
<li>previousSibling：上一个兄弟节点</li>
<li>parentNode：父节点</li>
</ul>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id="ul"&gt;</span><br><span class="line">&lt;li&gt;sdsssssss&lt;/li&gt;</span><br><span class="line">&lt;li&gt;qqqq&lt;/li&gt;</span><br><span class="line">&lt;li&gt;wwww&lt;/li&gt;</span><br><span class="line">&lt;li&gt;eeee&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//节点属性</span></span><br><span class="line">  <span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"ul"</span>);</span><br><span class="line">  <span class="keyword">var</span> firstChild = ul.firstChild;</span><br><span class="line">  <span class="built_in">console</span>.log(firstChild.innerHTML);</span><br><span class="line">  <span class="keyword">var</span> lastChild = ul.lastChild;</span><br><span class="line">  <span class="built_in">console</span>.log(lastChild.innerHTML);</span><br><span class="line">  <span class="keyword">var</span> length = ul.childNodes.length;</span><br><span class="line">  <span class="built_in">console</span>.log(length);</span><br><span class="line">  <span class="keyword">var</span> secondChild = ul.childNodes.item(<span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(secondChild.innerHTML);</span><br><span class="line">  <span class="keyword">var</span> forthChild = ul.childNodes.item(<span class="number">2</span>).nextSibling;</span><br><span class="line">  <span class="built_in">console</span>.log(forthChild.innerHTML);</span><br><span class="line">  <span class="keyword">var</span> thridChild = forthChild.previousSibling;</span><br><span class="line">  <span class="built_in">console</span>.log(thridChild.innerHTML);</span><br><span class="line">  <span class="keyword">var</span> parentNode = forthChild.parentNode;</span><br><span class="line">  <span class="built_in">console</span>.log(parentNode.innerHTML);</span><br></pre></td></tr></table></figure>
<h2 id="文档片段"><a href="#文档片段" class="headerlink" title="文档片段"></a>文档片段</h2><p>好处在于减少dom的渲染次数，可以优化性能。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文本片段</span></span><br><span class="line">   <span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line">   <span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"ul"</span>);</span><br><span class="line">   <span class="keyword">var</span> li = <span class="literal">null</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">4</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">       li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">       li.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"item "</span>+i));</span><br><span class="line">       fragment.appendChild(li);</span><br><span class="line">   &#125;</span><br><span class="line">   ul.appendChild(fragment);</span><br></pre></td></tr></table></figure>
<h2 id="克隆元素"><a href="#克隆元素" class="headerlink" title="克隆元素"></a>克隆元素</h2><ul>
<li>someNode.cloneNode(true):深度克隆，会复制节点及整个子节点</li>
<li>someNode.cloneNode(false):浅克隆，会复制节点，但不复制子节点</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//克隆</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">clone</span> = ul.cloneNode(<span class="keyword">true</span>);</span><br><span class="line">document.body.appendChild(<span class="keyword">clone</span>);</span><br></pre></td></tr></table></figure>
<h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><h3 id="childNodes-length存在跨浏览器的问题"><a href="#childNodes-length存在跨浏览器的问题" class="headerlink" title="childNodes.length存在跨浏览器的问题"></a>childNodes.length存在跨浏览器的问题</h3><p>可以看到有关列表的html片段没有用</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id="ul"&gt;</span><br><span class="line">&lt;li&gt;sdsssssss&lt;/li&gt;</span><br><span class="line">&lt;li&gt;qqqq&lt;/li&gt;</span><br><span class="line">&lt;li&gt;wwww&lt;/li&gt;</span><br><span class="line">&lt;li&gt;eeee&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>这种书写格式而是使用没有换行的格式书写，是因为在不同的浏览器中，获取<code>ul.childNodes.length</code>的结果有差异：</p>
<ul>
<li>在ie中，ul.childNodes.length不会计算li之间的换行空格，从而得到数值为4</li>
<li>在ff、chrome,safari中，会有包含li之间的空白符的5个文本节点，因此ul.childNodes.length为9<br>若要解决跨浏览器问题，可以将li之间的换行去掉，改成一行书写格式。</li>
</ul>
<h3 id="cloneNode存在跨浏览器的问题"><a href="#cloneNode存在跨浏览器的问题" class="headerlink" title="cloneNode存在跨浏览器的问题"></a>cloneNode存在跨浏览器的问题</h3><ul>
<li>在IE中，通过cloneNode方法复制的元素，会复制事件处理程序，比如，var b = a.cloneNode(true).若a存在click,mouseover等事件监听，则b也会拥有这些事件监听。</li>
<li>在ff,chrome,safari中，通过cloneNode方法复制的元素，只会复制特性，其他一切都不会复制<br>因此，若要解决跨浏览器问题，在复制前，最好先移除事件处理程序。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-oslab"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/01/04/oslab/">HIT操作系统实验总结</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/01/04/oslab/" class="article-date">
	  <time datetime="2017-01-04T12:50:26.000Z" itemprop="datePublished">2017-01-04</time>
	</a>

      
    <a class="article-category-link" href="/categories/操作系统/">操作系统</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>哈工大《操作系统》六次实验每次需要修改的文件见：<a href="http://www.meng.uno/os.html" target="_blank" rel="noopener">修改文件列表</a><br>本实验总结源自github项目：<a href="https://github.com/HITAmigos/MIC" target="_blank" rel="noopener">MIC</a></p>
</blockquote>
<h2 id="操作系统引导"><a href="#操作系统引导" class="headerlink" title="操作系统引导"></a>操作系统引导</h2><h3 id="bootsect-s"><a href="#bootsect-s" class="headerlink" title="bootsect.s"></a>bootsect.s</h3><ul>
<li>实现屏幕输出</li>
<li>修改打印的字符串（空白也算作一个字符）</li>
<li>读入setup.s代码（包括：设置驱动器、磁头，读取setup.s的磁道和扇区，并跳到相应位置开始执行）</li>
</ul>
<h3 id="setup-s"><a href="#setup-s" class="headerlink" title="setup.s"></a>setup.s</h3><ul>
<li>（和bootsect.s中部分代码相同）打印相关信息</li>
<li>（原代码已经可以部分打印硬件信息）需要在相关位置嵌入msg实现打印提示信息功能</li>
</ul>
<h3 id="build-c"><a href="#build-c" class="headerlink" title="build.c"></a>build.c</h3><ul>
<li>将bootsect.s、setup.s、system.s编译、链接生成Image文件</li>
</ul>
<h2 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h2><ul>
<li>unistd.h文件：添加系统调用功能号</li>
<li>sys.h声明新的系统调用处理函数；添加系统调用处理程序索引值到指针数组表中</li>
<li>system_call.s中增加系统调用总数</li>
<li>makefile添加新的系统调用所在文件的编译链接规则（依赖关系）</li>
</ul>
<h2 id="进程运行轨迹的跟踪与统计"><a href="#进程运行轨迹的跟踪与统计" class="headerlink" title="进程运行轨迹的跟踪与统计"></a>进程运行轨迹的跟踪与统计</h2><h3 id="process-c"><a href="#process-c" class="headerlink" title="process.c"></a>process.c</h3><ul>
<li>涉及到fork()和wait()系统调用</li>
<li>主要实现了一个函数——cpuio_bound()</li>
<li>用fork()建立若干个同时运行的子程序</li>
<li>父P等待所有子P退出后才退出，每个子P性质通过cpuio_bound()控制性质</li>
</ul>
<h3 id="fork-c"><a href="#fork-c" class="headerlink" title="fork.c"></a>fork.c</h3><ul>
<li>fork系统调用函数</li>
</ul>
<h3 id="main-c"><a href="#main-c" class="headerlink" title="main.c"></a>main.c</h3><ul>
<li>内核的入口函数main()，对它的修改是增加日志创建语句，并将log文件关联到文件描述符log文件记录进程状态转换轨迹</li>
</ul>
<h3 id="kernel"><a href="#kernel" class="headerlink" title="kernel"></a>kernel</h3><p>主要寻找进程状态转换点：</p>
<ul>
<li>printk.c</li>
<li>sched.c</li>
<li>exit.c</li>
</ul>
<h2 id="信号量的实现和应用"><a href="#信号量的实现和应用" class="headerlink" title="信号量的实现和应用"></a>信号量的实现和应用</h2><h3 id="sem-open"><a href="#sem-open" class="headerlink" title="sem_open"></a>sem_open</h3><ul>
<li>打开信号量</li>
</ul>
<h3 id="sem-wait"><a href="#sem-wait" class="headerlink" title="sem_wait"></a>sem_wait</h3><ul>
<li>信号量P操作——value–</li>
</ul>
<h3 id="sem-post"><a href="#sem-post" class="headerlink" title="sem_post"></a>sem_post</h3><ul>
<li>信号量V操作——value++</li>
</ul>
<h3 id="sem-unlink"><a href="#sem-unlink" class="headerlink" title="sem_unlink"></a>sem_unlink</h3><ul>
<li>释放信号量</li>
</ul>
<h2 id="地址映射与共享"><a href="#地址映射与共享" class="headerlink" title="地址映射与共享"></a>地址映射与共享</h2><h3 id="shm-c"><a href="#shm-c" class="headerlink" title="shm.c"></a>shm.c</h3><ul>
<li>shmget()：得到一个共享内存标识符或创建一个共享内存对象并返回共享内存标识符</li>
<li>shmat()：连接共享内存标识符为shmid的共享内存，连接成功后把共享内存区对象映射到调用进程的地址空间，随后可像本地空间一样访问</li>
</ul>
<h3 id="sem-c"><a href="#sem-c" class="headerlink" title="sem.c"></a>sem.c</h3><p>实现信号量的四种操作，与实验四相同</p>
<h2 id="字符显示的控制"><a href="#字符显示的控制" class="headerlink" title="字符显示的控制"></a>字符显示的控制</h2><h3 id="keyboard-S"><a href="#keyboard-S" class="headerlink" title="keyboard.S"></a>keyboard.S</h3><ul>
<li>添加对字符F12的输入判断</li>
</ul>
<h3 id="console-c"><a href="#console-c" class="headerlink" title="console.c"></a>console.c</h3><ul>
<li>添加输出到控制台的字符控制</li>
</ul>
<h3 id="file-dev-c"><a href="#file-dev-c" class="headerlink" title="file_dev.c"></a>file_dev.c</h3><ul>
<li>添加输出到文件的字符控制</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/操作系统/">操作系统</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-svm_number_recog"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/12/17/svm_number_recog/">手写数字识别（SVM）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/12/17/svm_number_recog/" class="article-date">
	  <time datetime="2016-12-17T04:08:13.000Z" itemprop="datePublished">2016-12-17</time>
	</a>

      
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="调用第三方库"><a href="#调用第三方库" class="headerlink" title="调用第三方库"></a>调用第三方库</h2><p>   在此我选用的是sk-learn的关于svm的库，其关于此次实验的svm函数定义为：<br>svm.SVC(C=8.0, kernel=’rbf’, gamma=0.1)<br>       svm.SVC()函数的几个重要参数在其官方的介绍文档中有如下的解释：<br>C :误差项的惩罚参数，浮点型，可选 (默认=1.0)；<br>kernel : 指定核函数类型，字符型，可选 (默认=‘rbf’)，如果使用自定义的核函数，需要预先计算核矩阵；<br>gamma : 浮点型, 可选 (默认=0.0)，’rbf’核函数的系数，需要注意的是，此处的gamma与课本中的sigma是互为倒数的关系（所以其可以为0）。<br>        因为是调用别人的库（应该说完全是别人的功劳），所以在实现上没有什么可以说的。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"><span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">Created on Thu Dec  1 13:30:21 2016</span></span><br><span class="line"><span class="string">@author: kuangmeng</span></span><br><span class="line"><span class="string">使用SVM分类器，从MNIST数据集中进行手写数字识别的分类程序</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">import cPickle</span><br><span class="line">import gzip</span><br><span class="line">from sklearn import svm</span><br><span class="line">import time</span><br><span class="line">def load_data():</span><br><span class="line">    <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">    返回包含训练数据、验证数据、测试数据的元组的模式识别数据</span></span><br><span class="line"><span class="string">    "</span><span class="string">""</span></span><br><span class="line">    f = gzip.open(<span class="string">'data.gz'</span>, <span class="string">'rb'</span>)</span><br><span class="line">    training_data, validation_data, test_data = cPickle.load(f)</span><br><span class="line">    f.close()</span><br><span class="line">    return (training_data, validation_data, test_data)</span><br><span class="line">def Svm():</span><br><span class="line">    print (<span class="string">"开始时间："</span>,<span class="selector-tag">time</span>.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)) </span><br><span class="line">    training_data, validation_data, test_data = load_data()</span><br><span class="line">    # 传递训练模型的参数，这里用默认的参数</span><br><span class="line">    clf = svm.SVC(C=<span class="number">10.0</span>, kernel=<span class="string">'rbf'</span>, gamma=<span class="number">0.10</span>,cache_size=<span class="number">8000</span>,probability=False)</span><br><span class="line">    # 进行模型训练</span><br><span class="line">    clf.fit(training_data[<span class="number">0</span>], training_data[<span class="number">1</span>])</span><br><span class="line">    # 测试集测试预测结果</span><br><span class="line">    predictions = [int(a) <span class="keyword">for</span> <span class="selector-tag">a</span> <span class="keyword">in</span> clf.predict(test_data[<span class="number">0</span>])]</span><br><span class="line">    num_correct = sum(int(<span class="selector-tag">a</span> == y) <span class="keyword">for</span> <span class="selector-tag">a</span>, y <span class="keyword">in</span> zip(predictions, test_data[<span class="number">1</span>]))</span><br><span class="line">    print ("%s 中的 %s 测试正确。" % (num_correct, len(test_data[1])))</span><br><span class="line">    print (<span class="string">"结束时间："</span>,<span class="selector-tag">time</span>.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>))</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    Svm()</span><br></pre></td></tr></table></figure>
<h2 id="自己编程实现"><a href="#自己编程实现" class="headerlink" title="自己编程实现"></a>自己编程实现</h2><p>   在自己编程实现过程中，我也借鉴了很多其他人写的很成熟的方案，最终从数据结构、逻辑结构以及特征计算等方面得到比较合理的一组答案。</p>
<h3 id="逻辑结构"><a href="#逻辑结构" class="headerlink" title="逻辑结构"></a>逻辑结构</h3><p>本次实验的程序分为“训练”和“测试”两部分，两部分分别进行的工作如下：</p>
<h4 id="训练"><a href="#训练" class="headerlink" title="训练"></a>训练</h4><p>加载数据<br>初始化模型<br>更新标签<br>初始化预测误差<br>迭代每个样本（用KT优化）<br>得到每个样本的模型<br>对步骤5的解释：<br>       对于svm我们要求解a（数组），如果 a的所有分量满足svm对偶问题的KKT条件，那么这个问题的解就求出来了，我们svm模型学习也就完成了。如果没有满足KKT，那么我们就在 a中找两个分量 ai和 aj，其中 ai 是违反KKT条件最严重的分量，通过计算，使得 ai 和 aj满足KKT条件，直到a的所有分量都满足KKT条件。而且这个计算过程是收敛的，因为每次计算出来的新的两个分量，使得对偶问题中要优化的目标函数值更小。因为每次求解的那两个分量，是要优化问题在这两个分量上的极小值，所以每一次优化，都会使目标函数比上一次的优化结果的值变小。</p>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>加载数据<br>对每个数据预测<br>计算正确率与相关信息逻辑结构<br>特征计算<br>       仿照KKT的优化方法，在本次试验中，我将每张图片作为一个数据。由此得到对每一个测试样本的预测（如果在某个分类的计算时结果为正，则说明该测试样本属于该类别，结果为0则不属于此类别）。</p>
<h3 id="其他杂项"><a href="#其他杂项" class="headerlink" title="其他杂项"></a>其他杂项</h3><p>核函数选择：按照传统，选择的是RBF核函数，函数形式与教材完全相同；<br>数据来源：来源自网友整理之后的数据（测试数据与训练数据没有均分）；<br>SMO优化算法：<br>取初始值a(0)=0，令K=0；<br>选取优化变量a1(k) , a2(k) , 针对优化问题，求得最优解 a1(k+1) , a2(k+1) 更新 a(k) 为 a(k+1) ；<br>在精度条件范围内是否满足停机条件，即是否有变量违反KKT条件，如果违反了，则令k=k+1，跳转2，否则4；<br>求得近似解â =a(k+1)<br>       其中第3步中，是否违反KKT条件，对于a(k)的每个分量按照以下的违反KKT条件的公式进行验算即可。<br>       变量选取分为两步，第一步是选取违反KKT条件最严重的ai，第二步是根据已经选取的第一个变量，选择优化程度最大的第二个变量。<br>       违反KKT条件最严重的变量可以按照这样的规则选取，首先看0\&lt;ai\&lt;C的那些分量中，是否有违反KKT条件的，如果有，则选取yig(xi)最小的那个做为a1。如果没有则遍历所有的样本点，在违反KKT条件的分量中选取yig(xi)最小的做为a1。<br>       当选择了a1后，如果a1对应的E1为正，选择Ei最小的那个分量最为a2，如果E1为负，选择Ei最大的那个分量最为a2，这是因为anew2依赖于|E1−E2|。 如果选择的a2，不能满足下降的最小步长，那么就遍历所有的支持向量点做为a2进行试用，如果仍然都不能满足下降的最小步长，那么就遍历所有的样本点做为a2试用。如果还算是不能满足下降的最小步长，那么就重新选择a1。</p>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"><span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">Created on Sun Dec  4 14:24:53 2016</span></span><br><span class="line"><span class="string">@author: kuangmeng</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">import time</span><br><span class="line">import os</span><br><span class="line">import math</span><br><span class="line">class model:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self<span class="selector-class">.a</span> = []</span><br><span class="line">        self<span class="selector-class">.b</span> = <span class="number">0.0</span>   </span><br><span class="line">class DATA:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.samples = []        # 样本数据</span><br><span class="line">        self.tests = []          # 测试数据</span><br><span class="line">        self.models = []         # 训练的模型</span><br><span class="line">        self.forecasterror = []      # 预测知与真实y之差Ei</span><br><span class="line">        self.modelnum = 0         # 当前正使用或训练的模型</span><br><span class="line">        self.cache= []   # 缓存kernel函数的计算结果</span><br><span class="line">        self.sigma = 10        # sigma</span><br><span class="line">    def init_models(self):</span><br><span class="line">        <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">10</span>):</span><br><span class="line">            m = model()</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(self.samples)):</span><br><span class="line">                m<span class="selector-class">.a</span><span class="selector-class">.append</span>(<span class="number">0</span>)</span><br><span class="line">            self<span class="selector-class">.models</span><span class="selector-class">.append</span>(m)</span><br><span class="line">    def init_cache(self):</span><br><span class="line">        <span class="selector-tag">i</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> self<span class="selector-class">.samples</span>: </span><br><span class="line">            print (<span class="string">"正在计算第"</span>,i+<span class="number">1</span>,<span class="string">"个样本的RBF核"</span>)</span><br><span class="line">            self<span class="selector-class">.cache</span><span class="selector-class">.append</span>([])</span><br><span class="line">            j = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> z <span class="keyword">in</span> self<span class="selector-class">.samples</span>:</span><br><span class="line">                <span class="keyword">if</span> <span class="selector-tag">i</span> &gt; j:</span><br><span class="line">                    self<span class="selector-class">.cache</span>[i].append(self<span class="selector-class">.cache</span>[j][i])</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    self<span class="selector-class">.cache</span>[i].append(RBF(x,z))</span><br><span class="line">                j += <span class="number">1</span></span><br><span class="line">            <span class="selector-tag">i</span> += <span class="number">1</span>                 </span><br><span class="line">class image:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self<span class="selector-class">.data</span> = []</span><br><span class="line">        self<span class="selector-class">.num</span> = <span class="number">0</span></span><br><span class="line">        self<span class="selector-class">.label</span> = []</span><br><span class="line">        self<span class="selector-class">.filename</span> = <span class="string">""</span></span><br><span class="line">gv = DATA()</span><br><span class="line"># RBF核函数</span><br><span class="line">def RBF(j, i):</span><br><span class="line">    <span class="keyword">if</span> j == <span class="selector-tag">i</span>:</span><br><span class="line">        return math.exp(<span class="number">0</span>)</span><br><span class="line">    sigma = gv.sigma</span><br><span class="line">    ret = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> m <span class="keyword">in</span> range(len(j.data)):</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> range(len(j<span class="selector-class">.data</span>[m])):</span><br><span class="line">            ret += math.pow(int(j<span class="selector-class">.data</span>[m][n]) - int(<span class="selector-tag">i</span><span class="selector-class">.data</span>[m][n]), <span class="number">2</span>)</span><br><span class="line">    ret = math.exp(-ret/sigma)</span><br><span class="line">    return ret</span><br><span class="line">#加载测试与训练数据</span><br><span class="line">def loaddata(dirpath, name):</span><br><span class="line">    files = os.listdir(dirpath)</span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">        <span class="selector-tag">img</span> = image()</span><br><span class="line">        <span class="selector-tag">img</span><span class="selector-class">.data</span> = images(dirpath + file)</span><br><span class="line">        <span class="selector-tag">img</span><span class="selector-class">.num</span> = int(file[<span class="number">0</span>])</span><br><span class="line">        <span class="selector-tag">img</span><span class="selector-class">.filename</span> = file</span><br><span class="line">        name.append(img)</span><br><span class="line">#图片分列        </span><br><span class="line">def images(path):</span><br><span class="line">    <span class="selector-tag">img</span> = []</span><br><span class="line">    file = open(path, <span class="string">"r"</span>) </span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file:</span><br><span class="line">        line = line[:-<span class="number">2</span>]</span><br><span class="line">        <span class="selector-tag">img</span>.append(line)</span><br><span class="line">    return <span class="selector-tag">img</span>  </span><br><span class="line">#更新样本标签，正在训练啥就将啥的标签定为<span class="number">1</span>，其他的定为-<span class="number">1</span>    </span><br><span class="line">def update_samples_label(num):</span><br><span class="line">    <span class="keyword">for</span> <span class="selector-tag">img</span> <span class="keyword">in</span> gv<span class="selector-class">.samples</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="selector-tag">img</span><span class="selector-class">.num</span> == num:</span><br><span class="line">            <span class="selector-tag">img</span><span class="selector-class">.label</span><span class="selector-class">.append</span>(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="selector-tag">img</span><span class="selector-class">.label</span><span class="selector-class">.append</span>(-<span class="number">1</span>)          </span><br><span class="line">#初始化DATA.forecasterror</span><br><span class="line">def init_forecasterror():</span><br><span class="line">    gv<span class="selector-class">.forecasterror</span> = []</span><br><span class="line">    <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(len(gv.samples)):</span><br><span class="line">        diff = <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(gv.samples)):</span><br><span class="line">            <span class="keyword">if</span> gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.a</span>[j] != <span class="number">0</span>:</span><br><span class="line">                 diff += gv.models[gv.modelnum].a[j] * gv.samples[j].label[gv.modelnum] * gv.cache[j][i]</span><br><span class="line">        diff += gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.b</span> </span><br><span class="line">        diff -= gv<span class="selector-class">.samples</span>[i]<span class="selector-class">.label</span>[gv.modelnum]</span><br><span class="line">        gv<span class="selector-class">.forecasterror</span><span class="selector-class">.append</span>(diff)</span><br><span class="line">#更新DATA<span class="selector-class">.forecasterror</span>        </span><br><span class="line">def update_forecasterror(i, new_ai, j, new_bj, new_b):</span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> range(len(gv.samples)):</span><br><span class="line">        diff = (new_ai - gv.models[gv.modelnum].a[i])* gv.samples[i].label[gv.modelnum] * gv.cache[i][idx]</span><br><span class="line">        diff += (new_bj - gv.models[gv.modelnum].a[j])* gv.samples[j].label[gv.modelnum] * gv.cache[j][idx]</span><br><span class="line">        diff += new_b - gv<span class="selector-class">.models</span>[gv.modelnum].b</span><br><span class="line">        diff += gv<span class="selector-class">.forecasterror</span>[idx]</span><br><span class="line">        gv<span class="selector-class">.forecasterror</span>[idx] = diff</span><br><span class="line"># g(x)</span><br><span class="line">def predict(m):</span><br><span class="line">    pred = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(len(gv.samples)):</span><br><span class="line">        <span class="keyword">if</span> gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.a</span>[j] != <span class="number">0</span>:</span><br><span class="line">            pred += gv.models[gv.modelnum].a[j] * gv.samples[j].label[gv.modelnum] * RBF(gv.samples[j],m)</span><br><span class="line">    pred += gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.b</span> </span><br><span class="line">    return pred</span><br><span class="line">def save_models():</span><br><span class="line">    <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        fn = open(<span class="string">"models/"</span> + str(i) + <span class="string">"_a.model"</span>, <span class="string">"w"</span>)</span><br><span class="line">        <span class="keyword">for</span> ai <span class="keyword">in</span> gv<span class="selector-class">.models</span>[i]<span class="selector-class">.a</span>:</span><br><span class="line">            fn.write(str(ai))</span><br><span class="line">            fn.write(<span class="string">'\n'</span>)</span><br><span class="line">        fn.close()</span><br><span class="line">        fn = open(<span class="string">"models/"</span> + str(i) + <span class="string">"_b.model"</span>, <span class="string">"w"</span>)</span><br><span class="line">        fn.write(str(gv<span class="selector-class">.models</span>[i].b))</span><br><span class="line">        fn.close()</span><br><span class="line">def load_models():</span><br><span class="line">    <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        fn = open(<span class="string">"models/"</span> + str(i) + <span class="string">"_a.model"</span>, <span class="string">"r"</span>)</span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> fn:</span><br><span class="line">            gv<span class="selector-class">.models</span>[i]<span class="selector-class">.a</span>[j] = <span class="attribute">float</span>(line)</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        fn.close()</span><br><span class="line">        fn = open(<span class="string">"models/"</span> + str(i) + <span class="string">"_b.model"</span>, <span class="string">"r"</span>)</span><br><span class="line">        gv.models[i].b = float(fn.readline())</span><br><span class="line">        fn.close()</span><br><span class="line">###</span><br><span class="line">#  T: tolerance 误差容忍度(精度)</span><br><span class="line">#  times: 迭代次数</span><br><span class="line"># 优化方法：SMO</span><br><span class="line">#  C: 惩罚系数</span><br><span class="line">#  modelnum: 模型序号0到9</span><br><span class="line">#  step: aj移动的最小步长</span><br><span class="line">###</span><br><span class="line">def train(T, times, C, modelnum, step):</span><br><span class="line">    <span class="selector-tag">time</span> = <span class="number">0</span></span><br><span class="line">    gv<span class="selector-class">.modelnum</span> = modelnum</span><br><span class="line">    update_samples_label(modelnum)</span><br><span class="line">    init_forecasterror()</span><br><span class="line">    updated = True</span><br><span class="line">    while <span class="selector-tag">time</span> &lt; times and updated:</span><br><span class="line">        updated = False</span><br><span class="line">        <span class="selector-tag">time</span> += <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(len(gv.samples)):</span><br><span class="line">            ai = gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.a</span>[i]</span><br><span class="line">            Ei = gv<span class="selector-class">.forecasterror</span>[i]</span><br><span class="line">            #计算违背KKT的点</span><br><span class="line">            if (gv.samples[i].label[gv.modelnum] * Ei &lt; -T and ai &lt; C) or (gv.samples[i].label[gv.modelnum] * Ei &gt; T and ai &gt; 0):</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(len(gv.samples)):</span><br><span class="line">                    <span class="keyword">if</span> j == <span class="selector-tag">i</span>: continue</span><br><span class="line">                    kii = gv<span class="selector-class">.cache</span>[i][i]</span><br><span class="line">                    kjj = gv<span class="selector-class">.cache</span>[j][j]</span><br><span class="line">                    kji = kij = gv<span class="selector-class">.cache</span>[i][j] </span><br><span class="line">                    eta = kii + kjj - 2 * kij </span><br><span class="line">                    <span class="keyword">if</span> eta &lt;= <span class="number">0</span>: continue</span><br><span class="line">                    new_aj = gv.models[gv.modelnum].a[j] + gv.samples[j].label[gv.modelnum] * (gv.forecasterror[i] - gv.forecasterror[j]) / eta # f 7.106</span><br><span class="line">                    L = <span class="number">0.0</span></span><br><span class="line">                    H = <span class="number">0.0</span></span><br><span class="line">                    a1_old = gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.a</span>[i]</span><br><span class="line">                    a2_old = gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.a</span>[j]</span><br><span class="line">                    <span class="keyword">if</span> gv<span class="selector-class">.samples</span>[i]<span class="selector-class">.label</span>[gv.modelnum] == gv<span class="selector-class">.samples</span>[j]<span class="selector-class">.label</span>[gv.modelnum]:</span><br><span class="line">                        L = max(<span class="number">0</span>, a2_old + a1_old - C)</span><br><span class="line">                        H = min(C, a2_old + a1_old)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        L = max(<span class="number">0</span>, a2_old - a1_old)</span><br><span class="line">                        H = min(C, C + a2_old - a1_old)</span><br><span class="line">                    <span class="keyword">if</span> new_aj &gt; H:</span><br><span class="line">                        new_aj = H</span><br><span class="line">                    <span class="keyword">if</span> new_aj &lt; L:</span><br><span class="line">                        new_aj = L</span><br><span class="line">                    <span class="keyword">if</span> abs(a2_old - new_aj) &lt; step:</span><br><span class="line">                       # print ("j = %d, is not moving enough" % j)</span><br><span class="line">                        continue</span><br><span class="line">                    new_ai = a1_old + gv.samples[i].label[gv.modelnum] * gv.samples[j].label[gv.modelnum] * (a2_old - new_aj) # f 7.109 </span><br><span class="line">                    new_b1 = gv.models[gv.modelnum].b - gv.forecasterror[i] - gv.samples[i].label[gv.modelnum] * kii * (new_ai - a1_old) - gv.samples[j].label[gv.modelnum] * kji * (new_aj - a2_old) # f7.115</span><br><span class="line">                    new_b2 = gv.models[gv.modelnum].b - gv.forecasterror[j] - gv.samples[i].label[gv.modelnum]*kji*(new_ai - a1_old) - gv.samples[j].label[gv.modelnum]*kjj*(new_aj-a2_old)    # f7.116</span><br><span class="line">                    <span class="keyword">if</span> new_ai &gt; <span class="number">0</span> and new_ai &lt; C: new_b = new_b1</span><br><span class="line">                    elif new_aj &gt; <span class="number">0</span> and new_aj &lt; C: new_b = new_b2</span><br><span class="line">                    <span class="keyword">else</span>: new_b = (new_b1 + new_b2) / <span class="number">2.0</span></span><br><span class="line">                    update_forecasterror(<span class="selector-tag">i</span>, new_ai, j, new_aj, new_b)</span><br><span class="line">                    gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.a</span>[i] = new_ai</span><br><span class="line">                    gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.a</span>[j] = new_aj</span><br><span class="line">                    gv<span class="selector-class">.models</span>[gv.modelnum]<span class="selector-class">.b</span> = new_b</span><br><span class="line">                    updated = True</span><br><span class="line">                    print ("迭代次数: %d, 修改组合: i: %d 与 j:%d" %(time, i, j))</span><br><span class="line">                    break</span><br><span class="line"># 测试数据</span><br><span class="line">def test():</span><br><span class="line">    record = <span class="number">0</span></span><br><span class="line">    record_correct = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> <span class="selector-tag">img</span> <span class="keyword">in</span> gv<span class="selector-class">.tests</span>: </span><br><span class="line">        print (<span class="string">"正在测试："</span>, <span class="selector-tag">img</span>.filename)</span><br><span class="line">        <span class="keyword">for</span> modelnum <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">            gv<span class="selector-class">.modelnum</span> = modelnum</span><br><span class="line">            <span class="keyword">if</span> predict(img) &gt; <span class="number">0</span>:</span><br><span class="line">                print (<span class="string">"测试结果："</span>,modelnum)</span><br><span class="line">                record += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> modelnum == int(<span class="selector-tag">img</span><span class="selector-class">.filename</span>[<span class="number">0</span>]):</span><br><span class="line">                    record_correct += <span class="number">1</span></span><br><span class="line">                break</span><br><span class="line">    print (<span class="string">"相关记录数量:"</span>, record)</span><br><span class="line">    print (<span class="string">"正确识别数量:"</span>, record_correct)</span><br><span class="line">    print (<span class="string">"正确识别比例:"</span>, record_correct/record)</span><br><span class="line">    print (<span class="string">"测试数据总量:"</span>, len(gv.tests))</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print (<span class="string">"开始时间："</span>,<span class="selector-tag">time</span>.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)) </span><br><span class="line">    training = True</span><br><span class="line">    loaddata(<span class="string">"train/"</span>, gv.samples)</span><br><span class="line">    loaddata(<span class="string">"test/"</span>, gv.tests)    </span><br><span class="line">    print (<span class="string">"训练数据个数："</span>,len(gv.samples))</span><br><span class="line">    print (<span class="string">"测试数据个数："</span>,len(gv.tests))</span><br><span class="line">    <span class="keyword">if</span> training == True:</span><br><span class="line">        gv.init_cache()</span><br><span class="line">        gv.init_models()</span><br><span class="line">    print (<span class="string">"模型初始化成功！"</span>) </span><br><span class="line">    print (<span class="string">"当前时间："</span>,<span class="selector-tag">time</span>.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>))        </span><br><span class="line">    T = <span class="number">0.0001</span></span><br><span class="line">    C = <span class="number">10</span></span><br><span class="line">    step = <span class="number">0.001</span></span><br><span class="line">    gv<span class="selector-class">.sigma</span> = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> training == True:</span><br><span class="line">       <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">            print (<span class="string">"正在训练模型:"</span>, i)</span><br><span class="line">            train(T, <span class="number">10</span>, C, <span class="selector-tag">i</span>, step)</span><br><span class="line">            save_models()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        load_models()</span><br><span class="line">        <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">            update_samples_label(i)</span><br><span class="line">    print (<span class="string">"训练完成时间："</span>,<span class="selector-tag">time</span>.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)) </span><br><span class="line">    test()</span><br><span class="line">    print (<span class="string">"测试完成时间："</span>,<span class="selector-tag">time</span>.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>))</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/机器学习/">机器学习</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-least_square_method"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/12/17/least_square_method/">多项式拟合曲线——最小二乘法</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/12/17/least_square_method/" class="article-date">
	  <time datetime="2016-12-17T03:59:39.000Z" itemprop="datePublished">2016-12-17</time>
	</a>

      
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>直接上代码，最小二乘法比较简单，在拟合效果上也相当不错：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import matplotlib<span class="selector-class">.pyplot</span> as plt</span><br><span class="line">import numpy</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">f = plt.figure()</span><br><span class="line">draw = f.add_subplot(<span class="number">111</span>)</span><br><span class="line">#拟合函数的次数限制</span><br><span class="line">times=<span class="number">9</span></span><br><span class="line">tail=times+<span class="number">1</span></span><br><span class="line">x = numpy.arange(-<span class="number">2</span>,<span class="number">2</span>,<span class="number">0.1</span>)</span><br><span class="line">y = [((xi-<span class="number">1</span>)*(xi*xi-<span class="number">1</span>)+<span class="number">0.5</span>)*numpy.cos(xi) <span class="keyword">for</span> xi <span class="keyword">in</span> x]</span><br><span class="line">#所有使用到的全局变量声明</span><br><span class="line">i=<span class="number">0</span></span><br><span class="line">xlabel=[]</span><br><span class="line">ylabel=[]</span><br><span class="line">A=[]</span><br><span class="line">B=[]</span><br><span class="line">tempA=[]</span><br><span class="line">tempB=[]</span><br><span class="line">X=[]</span><br><span class="line">Y=[]</span><br><span class="line">#-----------------------------</span><br><span class="line">#生成数据，加入cos函数，作为噪声！</span><br><span class="line"><span class="keyword">for</span> xi <span class="keyword">in</span> x:</span><br><span class="line">    r=float(random.randint(80,100))/100</span><br><span class="line">    xlabel.append(xi*r)</span><br><span class="line">    ylabel.append(y[i]*r)</span><br><span class="line">    i+=<span class="number">1</span></span><br><span class="line">draw.plot(xlabel,ylabel,<span class="attribute">color</span>=<span class="string">'b'</span>,linestyle=<span class="string">''</span>,marker=<span class="string">'*'</span>)</span><br><span class="line">length=len(xlabel)</span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">0</span>,tail):</span><br><span class="line">	tempA=[]</span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,tail):</span><br><span class="line">		temp=<span class="number">0.0</span></span><br><span class="line">		<span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>,length):</span><br><span class="line">			d=<span class="number">1.0</span></span><br><span class="line">			<span class="keyword">for</span> m <span class="keyword">in</span> range(<span class="number">0</span>,j+i):</span><br><span class="line">				d=d*xlabel[k]</span><br><span class="line">			temp+=d</span><br><span class="line">		tempA.append(temp)</span><br><span class="line">	A.append(tempA)</span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">0</span>,tail):</span><br><span class="line">	temp=<span class="number">0.0</span></span><br><span class="line">	<span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>,length):</span><br><span class="line">		d=<span class="number">1.0</span></span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,i):</span><br><span class="line">			d=d*xlabel[k]</span><br><span class="line">		temp+=ylabel[k]*d</span><br><span class="line">	B.append(temp)</span><br><span class="line"> #X为可行解</span><br><span class="line">X=numpy<span class="selector-class">.linalg</span><span class="selector-class">.solve</span>(A,B)</span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">'可行解a(x的系数)的矩阵表示为：[a0,---,a%d]'</span>%(times)</span></span>)</span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(X)</span></span></span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">0</span>,length):</span><br><span class="line">	temp=<span class="number">0.0</span></span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,tail):</span><br><span class="line">		d=<span class="number">1.0</span></span><br><span class="line">		<span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>,j):</span><br><span class="line">			d*=x[i]</span><br><span class="line">		d*=X[j]</span><br><span class="line">		temp+=d</span><br><span class="line">	Y.append(temp)</span><br><span class="line">draw.plot(x,Y,<span class="attribute">color</span>=<span class="string">'r'</span>,linestyle=<span class="string">'-'</span>,marker=<span class="string">'.'</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/机器学习/">机器学习</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-pca"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/12/17/pca/">主成分分析（PCA）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/12/17/pca/" class="article-date">
	  <time datetime="2016-12-17T03:52:21.000Z" itemprop="datePublished">2016-12-17</time>
	</a>

      
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="实验要求"><a href="#实验要求" class="headerlink" title="实验要求"></a>实验要求</h2><h3 id="实验目标"><a href="#实验目标" class="headerlink" title="实验目标"></a>实验目标</h3><p> 实现一个PCA模型，能够对给定数据进行降维（即找到其中的主成分）</p>
<h3 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h3><p>首先人工生成一些数据（如三维数据），让它们主要分布在低维空间中，如首先让某个维度的方差远小于其它维度，然后对这些数据旋转。生成这些数据后，用你的PCA方法进行主成分提取。</p>
<p>找一个人脸数据（小点样本量），用你实现PCA方法对该数据降维，找出一些主成分，然后用这些主成分对每一副人脸图像进行重建，比较一些它们与原图像有多大差别（用信噪比衡量）。</p>
<h2 id="实验准备"><a href="#实验准备" class="headerlink" title="实验准备"></a>实验准备</h2><h3 id="降维的必要"><a href="#降维的必要" class="headerlink" title="降维的必要"></a>降维的必要</h3><p>   多重共线性–预测变量之间相互关联。多重共线性会导致解空间的不稳定，从而可能导致结果的不连贯。</p>
<p>高维空间本身具有稀疏性。一维正态分布有68%的值落于正负标准差之间，而在十维空间上只有0.02%。</p>
<p>过多的变量会妨碍查找规律的建立。</p>
<p>仅在变量层面上分析可能会忽略变量之间的潜在联系。例如几个预测变量可能落入仅反映数据某一方面特征的一个组内。</p>
<h3 id="降维的目的"><a href="#降维的目的" class="headerlink" title="降维的目的"></a>降维的目的</h3><ul>
<li>减少预测变量的个数</li>
<li>确保这些变量是相互独立的</li>
<li>提供一个框架来解释结果</li>
<li>降维的方法</li>
<li>主成分分析</li>
<li>因子分析</li>
<li>用户自定义复合</li>
</ul>
<h2 id="有关PCA"><a href="#有关PCA" class="headerlink" title="有关PCA"></a>有关PCA</h2><h3 id="PCA概念"><a href="#PCA概念" class="headerlink" title="PCA概念"></a>PCA概念</h3><p>主成分分析 （ Principal Component Analysis ， PCA ）或者主元分析。是一种掌握事物主要矛盾的统计分析方法，它可以从多元事物中解析出主要影响因素，揭示事物的本质，简化复杂的问题。计算主成分的目的是将高维数据投影到较低维空间。给定 n 个变量的 m 个观察值，形成一个 n * m 的数据矩阵， n 通常比较大。对于一个由多个变量描述的复杂事物，人们难以认识，那么是否可以抓住事物主要方面进行重点分析呢？如果事物的主要方面刚好体现在几个主要变量上，我们只需要将这几个变量分离出来，进行详细分析。但是，在一般情况下，并不能直接找出这样的关键变量。这时我们可以用原有变量的线性组合来表示事物的主要方面， PCA 就是这样一种分析方法。</p>
<h3 id="PCA作用范围"><a href="#PCA作用范围" class="headerlink" title="PCA作用范围"></a>PCA作用范围</h3><p>  PCA 主要用于数据降维，对于一系列例子的特征组成的多维向量，多维向量里的某些元素本身没有区分性，比如某个元素在所有的例子中都为1，或者与1差距不大，那么这个元素本身就没有区分性，用它做特征来区分，贡献会非常小。所以我们的目的是找那些变化大的元素，即方差大的那些维，而去除掉那些变化不大的维，从而使特征留下的都是“精品”，而且计算量也变小了。 对于一个K维的特征来说，相当于它的每一维特征与其他维都是正交的（相当于在多维坐标系中，坐标轴都是垂直的），那么我们可以变化这些维的坐标系，从而使这个特征在某些维上方差大，而在某些维上方差很小。</p>
<h3 id="PCA的算法步骤"><a href="#PCA的算法步骤" class="headerlink" title="PCA的算法步骤"></a>PCA的算法步骤</h3><ol>
<li><p>设有m条n维数据。</p>
</li>
<li><p>将原始数据按列组成n行m列矩阵X</p>
</li>
<li><p>将X的每一行（代表一个属性字段）进行零均值化，即减去这一行的均值</p>
</li>
<li><p>求出协方差矩阵C=1/mXX’</p>
</li>
<li><p>求出协方差矩阵的特征值及对应的特征向量</p>
</li>
<li><p>将特征向量按对应特征值大小从上到下按行排列成矩阵，取前k行组成矩阵P</p>
</li>
<li><p>Y=PX即为降维到k维后的数据</p>
</li>
</ol>
<h2 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h2><p>Spyder 作为Python开发的集成开发环境；<br>    编程语言：Python 3.5<br>    操作系统：macOS Sierra</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><h3 id="PCA的应用分析"><a href="#PCA的应用分析" class="headerlink" title="PCA的应用分析"></a>PCA的应用分析</h3><p>对于一个训练集，100个对象模板，特征是10维，那么它可以建立一个100*10的矩阵，作为样本。求这个样本的协方差矩阵，得到一个10*10的协方差矩阵，然后求出这个协方差矩阵的特征值和特征向量，应该有10个特征值和特征向量，我们根据特征值的大小，取前四个特征值所对应的特征向量，构成一个10*4的矩阵，这个矩阵就是我们要求的特征矩阵，100*10的样本矩阵乘以这个10*4的特征矩阵，就得到了一个100*4的新的降维之后的样本矩阵，每个特征的维数下降了。当给定一个测试的特征集之后，比如1*10维的特征，乘以上面得到的10*4的特征矩阵，便可以得到一个1*4的特征，用这个特征去分类。所以做PCA实际上是求得这个投影矩阵，用高维的特征乘以这个投影矩阵，便可以将高维特征的维数下降到指定的维数。</p>
<p>在进行基因表达数据分析时，一个重要问题是确定每个实验数据是否是独立的，如果每次实验数据之间不是独立的，则会影响基因表达数据分析结果的准确性。对于利用基因芯片所检测到的基因表达数据，如果用 PCA 方法进行分析，可以将各个基因作为变量，也可以将实验条件作为变量。当将基因作为变量时，通过分析确定一组“主要基因元素”，它们能够很好地说明基因的特征，解释实验现象；当将实验条件作为变量时，通过分析确定一组“主要实验因素”，它们能够很好地刻画实验条件的特征，解释基因的行为。</p>
<p>PCA作为基础的数学分析方法，其实际应用十分广泛，比如人口统计学、数量地理学、分子动力学模拟、数学建模、数理分析等学科中均有应用，是一种常用的多变量分析方法。</p>
<h3 id="PCA优缺点"><a href="#PCA优缺点" class="headerlink" title="PCA优缺点"></a>PCA优缺点</h3><h4 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h4><p>以方差衡量信息的无监督学习，不受样本标签限制；</p>
<p>各主成分之间正交，可消除原始数据成分间的相互影响；<br>可减少指标选择的工作量；</p>
<p>用少数指标代替多数指标，利用PCA降维是最常用的算法；<br>计算方法简单，易于实现。</p>
<h4 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h4><p>主成分解释其含义往往具有一定的模糊性，不如原始样本完整；</p>
<p>贡献率小的主成分往往可能含有对样本差异的重要信息；</p>
<p>特征值矩阵的正交向量空间是否唯一有待讨论；</p>
<p>属于无监督学习。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"><span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">Created on Tue Nov 29 15:51:25 2016</span></span><br><span class="line"><span class="string">@author: kuangmeng</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib<span class="selector-class">.pyplot</span> as plt</span><br><span class="line">#全局变量定义区</span><br><span class="line">XLabel = list()</span><br><span class="line">YLabel = list()</span><br><span class="line">phi = [<span class="number">0</span>., <span class="number">0</span>.]</span><br><span class="line">#自己定义的矩阵转换函数</span><br><span class="line">def Transport(matrix):</span><br><span class="line">        temp = list()</span><br><span class="line">        <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(len(matrix[<span class="number">0</span>])):</span><br><span class="line">            temp.append(list())</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(matrix)):</span><br><span class="line">                temp[i].append(matrix[j][i])</span><br><span class="line">        return temp</span><br><span class="line">#加载文件（可以通过更改文件名来加载不同的测试数据）</span><br><span class="line">data_set = open(<span class="string">'testSet.txt'</span>, <span class="string">'r'</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> data_set.readlines():</span><br><span class="line">    data_line = line.strip().split()</span><br><span class="line">    tmpx = <span class="attribute">float</span>(data_line[<span class="number">0</span>])</span><br><span class="line">    tmpy = <span class="attribute">float</span>(data_line[<span class="number">1</span>])</span><br><span class="line">    phi[<span class="number">0</span>] += tmpx</span><br><span class="line">    phi[<span class="number">1</span>] += tmpy</span><br><span class="line">    XLabel.append(tmpx)</span><br><span class="line">    YLabel.append(tmpy)</span><br><span class="line">phi[<span class="number">0</span>] = phi[<span class="number">0</span>]/<span class="number">100.0</span></span><br><span class="line">phi[<span class="number">1</span>] = phi[<span class="number">1</span>]/<span class="number">100.0</span></span><br><span class="line">data_set.close()</span><br><span class="line">#加载结束</span><br><span class="line">temp_x = list()</span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">     temp_x.append([XLabel[i]-phi[<span class="number">0</span>], YLabel[i]-phi[<span class="number">1</span>]])</span><br><span class="line">temp_x_ = Transport(temp_x)</span><br><span class="line">sigma = np.dot(temp_x_, temp_x)</span><br><span class="line">D,V= np<span class="selector-class">.linalg</span><span class="selector-class">.eig</span>(sigma)</span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">     <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">         V<span class="selector-class">.real</span>[i][j] *= -<span class="number">1</span></span><br><span class="line">temp_v_ = Transport(V.real)</span><br><span class="line">tr1 = list()</span><br><span class="line">tr1.append(XLabel)</span><br><span class="line">tr1.append(YLabel)</span><br><span class="line">tr1 = Transport(tr1)</span><br><span class="line">xr1 = np.dot(tr1, temp_v_[<span class="number">0</span>])</span><br><span class="line">xr2 = np.dot(phi, temp_v_[<span class="number">1</span>])</span><br><span class="line">xr = tr1</span><br><span class="line">#        print xr</span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(len(XLabel)):</span><br><span class="line">      xr[i][<span class="number">0</span>] = np.dot(xr1[i], V<span class="selector-class">.real</span>[<span class="number">0</span>][<span class="number">0</span>])+np.dot(xr2, V<span class="selector-class">.real</span>[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line">      xr[i][<span class="number">1</span>] = np.dot(xr1[i], V<span class="selector-class">.real</span>[<span class="number">1</span>][<span class="number">0</span>])+np.dot(xr2, V<span class="selector-class">.real</span>[<span class="number">1</span>][<span class="number">1</span>])</span><br><span class="line">#        print xr</span><br><span class="line">plt.plot(XLabel, YLabel, <span class="string">'r+'</span>)</span><br><span class="line">temp_xr = Transport(xr)</span><br><span class="line">plt.plot(temp_xr[<span class="number">0</span>], temp_xr[<span class="number">1</span>], <span class="string">'b*'</span>)</span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(len(XLabel)):</span><br><span class="line">     plt.plot([XLabel[i],xr[i][<span class="number">0</span>]], [YLabel[i],xr[i][<span class="number">1</span>]])</span><br><span class="line">plt.axis([-<span class="number">8</span>,<span class="number">6</span>,-<span class="number">5</span>,<span class="number">5</span>])</span><br><span class="line">plt<span class="selector-class">.xlabel</span> = <span class="string">'x'</span></span><br><span class="line">plt<span class="selector-class">.ylabel</span> = <span class="string">'y'</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/机器学习/">机器学习</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-gmm"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/12/17/gmm/">使用EM算法优化的GMM</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/12/17/gmm/" class="article-date">
	  <time datetime="2016-12-17T03:16:53.000Z" itemprop="datePublished">2016-12-17</time>
	</a>

      
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>先上代码：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib<span class="selector-class">.pyplot</span> as mat</span><br><span class="line">import matplotlib<span class="selector-class">.mlab</span> as mlab</span><br><span class="line">#EM算法</span><br><span class="line">def EM(dataSet,K):</span><br><span class="line">    (N, M) = np.shape(dataSet)</span><br><span class="line">    W = np.zeros([N, K])</span><br><span class="line">    P= N/K</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(K):</span><br><span class="line">        W[np.floor(k*P):np.floor((k+<span class="number">1</span>)*P), k] = <span class="number">1</span></span><br><span class="line">    A,M,S = Mstep(dataSet,W)</span><br><span class="line">    return W, A, M, S</span><br><span class="line">#M的跨度</span><br><span class="line">def Mstep(data,W):</span><br><span class="line">    (N, M) = np.shape(data)</span><br><span class="line">    K = np.size(W,<span class="number">1</span>) </span><br><span class="line">    Nk = np.sum(W,<span class="number">0</span>)</span><br><span class="line">    A = Nk/np.sum(Nk)</span><br><span class="line">    Mm = data<span class="selector-class">.T</span><span class="selector-class">.dot</span>(W).dot(np.diag(np.reciprocal(Nk)))</span><br><span class="line">    S = np.zeros([M,M,K])</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(K):</span><br><span class="line">        datMean = data<span class="selector-class">.T</span> - Mm[<span class="number">0</span>:,k][None]<span class="selector-class">.T</span><span class="selector-class">.dot</span>(np.ones([<span class="number">1</span>,N]))</span><br><span class="line">        S[:,:,k] = (datMean.dot(np.diag(W[<span class="number">0</span>:,k])).dot(datMean.T))/Nk[k]</span><br><span class="line">    return A,Mm,S</span><br><span class="line">#E的跨度</span><br><span class="line">def Estep(data,A,M,S):</span><br><span class="line">    N = np.size(data,<span class="number">0</span>)</span><br><span class="line">    K = np.size(A)</span><br><span class="line">    W = np.zeros([N,K])</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(K):</span><br><span class="line">        <span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> range(N):</span><br><span class="line">            W[<span class="selector-tag">i</span>,k] = A[k]*multivariate(data[<span class="selector-tag">i</span>,:][None]<span class="selector-class">.T</span>, \</span><br><span class="line">                     M[:,k][None]<span class="selector-class">.T</span>,S[:,:,k])</span><br><span class="line">    W = W*np.reciprocal(np.sum(W,<span class="number">1</span>)[None].T)</span><br><span class="line">    return W</span><br><span class="line">def multivariate(x, m, s):</span><br><span class="line">    <span class="keyword">if</span> len(x) == len(m) and (len(x), len(x)) == s<span class="selector-class">.shape</span>:</span><br><span class="line">        det = np<span class="selector-class">.linalg</span><span class="selector-class">.det</span>(s)</span><br><span class="line">        const = 1.0/(np.math.pow((2*np.pi), float(len(x))/2) * np.math.pow(det, 1.0/2))</span><br><span class="line">        x_m = np.matrix(x - m)</span><br><span class="line">        inv_ = np<span class="selector-class">.linalg</span><span class="selector-class">.inv</span>(s)</span><br><span class="line">        result = np.math.pow(np.math.e, -0.5 * (x_m.T * inv_ * x_m))</span><br><span class="line">        return const * result</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        return -<span class="number">1</span></span><br><span class="line">#GMM主程序</span><br><span class="line">def GMM():</span><br><span class="line">    # 加载文件</span><br><span class="line">    input_file = open(<span class="string">'points.dat'</span>)</span><br><span class="line">    lines = input_file.readlines()</span><br><span class="line">    Data = np.array([line.strip().split() <span class="keyword">for</span> line <span class="keyword">in</span> lines]).astype(np.<span class="attribute">float</span>)</span><br><span class="line">    (x, y) = np.shape(Data)</span><br><span class="line">    mat.draw()</span><br><span class="line">    mat.pause(<span class="number">0.01</span>)</span><br><span class="line">    mat.subplot(<span class="number">111</span>)</span><br><span class="line">    mat.plot(x, y, <span class="string">'b*'</span>)</span><br><span class="line">    learn = Data[np<span class="selector-class">.math</span><span class="selector-class">.ceil</span>(x*<span class="number">0.8</span>):x, <span class="number">0</span>:]</span><br><span class="line">    train = Data[:np<span class="selector-class">.math</span><span class="selector-class">.floor</span>(x*<span class="number">0.8</span>), <span class="number">0</span>:]</span><br><span class="line">    trainnum = <span class="number">16</span></span><br><span class="line">    (W, Alpha, Mu, Sigma) = EM(train,trainnum)</span><br><span class="line">    m = np.arange(-<span class="number">4.0</span>, <span class="number">4.0</span>, <span class="number">0.1</span>)</span><br><span class="line">    n = np.arange(-<span class="number">4.0</span>, <span class="number">4.0</span>, <span class="number">0.1</span>)</span><br><span class="line">    ax, ay = np.meshgrid(m, n)</span><br><span class="line">    <span class="selector-tag">i</span> = <span class="number">0</span></span><br><span class="line">    prev = -<span class="number">9999</span></span><br><span class="line">    mat.clf()</span><br><span class="line">    while(True):    </span><br><span class="line">        <span class="keyword">if</span>(False):</span><br><span class="line">            SigmaSum = np.sum(Sigma,<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(trainnum):</span><br><span class="line">                Sigma[:,:,k] = SigmaSum</span><br><span class="line">        W = Estep(train,Alpha,Mu,Sigma)</span><br><span class="line">        Alpha,Mu,Sigma = Mstep(train,W)</span><br><span class="line">       # trains = logLike(train,Alpha,Mu,Sigma)</span><br><span class="line">        N,M = np.shape(train)</span><br><span class="line">        P = np.zeros([N,len(Alpha)])</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> range(len(Alpha)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(N):</span><br><span class="line">                P[j,k] = multivariate(train[j,:][None]<span class="selector-class">.T</span>,Mu[<span class="number">0</span>:,k][None]<span class="selector-class">.T</span>,Sigma[:,:,k])</span><br><span class="line">        trains = np.sum(np.log(P.dot(Alpha)))</span><br><span class="line">        <span class="selector-tag">i</span> = <span class="selector-tag">i</span> + <span class="number">1</span></span><br><span class="line">        #画图，训练和测试样本</span><br><span class="line">        mat.subplot(<span class="number">211</span>)</span><br><span class="line">        mat.scatter(train[<span class="number">0</span>:,<span class="number">0</span>],train[<span class="number">0</span>:,<span class="number">1</span>])</span><br><span class="line">        mat.hold(True)</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>, trainnum):</span><br><span class="line">            az = mlab.bivariate_normal(ax, ay, Sigma[<span class="number">0</span>, <span class="number">0</span>, k], Sigma[<span class="number">1</span>, \</span><br><span class="line">                <span class="number">1</span>, k], Mu[<span class="number">0</span>,k], Mu[<span class="number">1</span>,k], Sigma[<span class="number">1</span>, <span class="number">0</span>, k])</span><br><span class="line">            try:</span><br><span class="line">                mat.contour(ax, ay, az)</span><br><span class="line">            except:</span><br><span class="line">                continue</span><br><span class="line">        mat.hold(False)</span><br><span class="line">        # Render these</span><br><span class="line">        mat.draw()</span><br><span class="line">        mat.pause(<span class="number">0.01</span>)</span><br><span class="line">        mat.subplot(<span class="number">212</span>)</span><br><span class="line">        mat.scatter(learn[<span class="number">0</span>:,<span class="number">0</span>],learn[<span class="number">0</span>:,<span class="number">1</span>])</span><br><span class="line">        mat.hold(True)</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>, trainnum):</span><br><span class="line">            az = mlab.bivariate_normal(ax, ay, Sigma[<span class="number">0</span>, <span class="number">0</span>, k], Sigma[<span class="number">1</span>, \</span><br><span class="line">                <span class="number">1</span>, k], Mu[<span class="number">0</span>,k], Mu[<span class="number">1</span>,k], Sigma[<span class="number">1</span>, <span class="number">0</span>, k])</span><br><span class="line">            try:</span><br><span class="line">                mat.contour(ax, ay, az)</span><br><span class="line">            except:</span><br><span class="line">                continue</span><br><span class="line">        mat.hold(False)</span><br><span class="line">        <span class="keyword">if</span>(i&gt;<span class="number">150</span> or abs(trains - prev)&lt; <span class="number">0.01</span>):</span><br><span class="line">            break</span><br><span class="line">        prev = trains</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    GMM()</span><br></pre></td></tr></table></figure>
<h2 id="实验要求"><a href="#实验要求" class="headerlink" title="实验要求"></a>实验要求</h2><h3 id="实验目标"><a href="#实验目标" class="headerlink" title="实验目标"></a>实验目标</h3><p>  实现一个混合高斯模型，并且用EM算法估计模型中的参数。</p>
<h3 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h3><p>  用混合高斯模型产生k个高斯分布的数据（其中参数自己设定），然后用你实现的EM算法估计参数，看看每次迭代后似然值变化情况，考察EM算法是否可以获得正确的结果（与你设定的结果比较）。<br>           可以UCI上找一个简单问题数据，用你实现的GMM进行聚类。</p>
<h2 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h2><h3 id="GMM算法"><a href="#GMM算法" class="headerlink" title="GMM算法"></a>GMM算法</h3><p>高斯模型就是用高斯概率密度函数（正态分布曲线）精确地量化事物，将一个事物分解为若干的基于高斯概率密度函数（正态分布曲线）形成的模型。</p>
<p>对图像背景建立高斯模型的原理及过程：图像灰度直方图反映的是图像中某个灰度值出现的频次，也可以认为是图像灰度概率密度的估计。如果图像所包含的目标区域和背景区域相比比较大，且背景区域和目标区域在灰度上有一定的差异，那么该图像的灰度直方图呈现双峰-谷形状，其中一个峰对应于目标，另一个峰对应于背景的中心灰度。对于复杂的图像，尤其是医学图像，一般是多峰的。通过将直方图的多峰特性看作是多个高斯分布的叠加，可以解决图像的分割问题。 在智能监控系统中，对于运动目标的检测是中心内容，而在运动目标检测提取中，背景目标对于目标的识别和跟踪至关重要。而建模正是背景目标提取的一个重要环节。</p>
<p>我们首先要提起背景和前景的概念，前景是指在假设背景为静止的情况下，任何有意义的运动物体即为前景。建模的基本思想是从当前帧中提取前景，其目的是使背景更接近当前视频帧的背景。即利用当前帧和视频序列中的当前背景帧进行加权平均来更新背景,但是由于光照突变以及其他外界环境的影响，一般的建模后的背景并非十分干净清晰，而高斯混合模型是是建模最为成功的方法之一。</p>
<p>混合高斯模型使用K（基本为3到5个）个高斯模型来表征图像中各个像素点的特征,在新一帧图像获得后更新混合高斯模型, 用当前图像中的每个像素点与混合高斯模型匹配,如果成功则判定该点为背景点, 否则为前景点。 </p>
<p>通观整个高斯模型，主要是有方差和均值两个参数决定，对均值和方差的学习，采取不同的学习机制,将直接影响到模型的稳定性、精确性和收敛性 。由于我们是对运动目标的背景提取建模，因此需要对高斯模型中方差和均值两个参数实时更新。为提高模型的学习能力,改进方法对均值和方差的更新采用不同的学习率;为提高在繁忙的场景下,大而慢的运动目标的检测效果,引入权值均值的概念,建立背景图像并实时更新,然后结合权值、权值均值和背景图像对像素点进行前景和背景的分类。</p>
<p>具体实现过程：</p>
<ol>
<li>为图像的每个像素点指定一个初始的均值、标准差以及权重。</li>
<li>收集N（一般取200以上，否则很难得到像样的结果）帧图像利用在线EM算法得到每个像    素点的均值、标准差以及权重。</li>
<li>从N+1帧开始检测，检测的方法：<br> 对每个像素点：<ol>
<li>将所有的高斯核按照 ω / σ 降序排序</li>
<li>选择满足下式的前M个高斯核：M = arg min(ω / σ &gt; T)</li>
<li>如果当前像素点的像素值在中有一个满足：就可以认为其为背景点。</li>
</ol>
</li>
<li>更新背景图像，用EM算法。</li>
</ol>
<h3 id="EM算法"><a href="#EM算法" class="headerlink" title="EM算法"></a>EM算法</h3><p>EM 算法是 Dempster，Laind，Rubin 于 1977 年提出的求参数极大似然估计的一种方法，它可以从非完整数据集中对参数进行 MLE 估计，是一种非常简单实用的学习算法。这种方法可以广泛地应用于处理缺损数据，截尾数据，带有噪声等所谓的不完全数据(incomplete data)。</p>
<p>最大期望算法经过两个步骤交替进行计算：</p>
<ul>
<li>第一步是计算期望（E），利用对隐藏变量的现有估计值，计算其最大似然估计值；</li>
<li>第二步是最大化（M），最大化在 E 步上求得的最大似然值来计算参数的值。</li>
</ul>
<p>M 步上找到的参数估计值被用于下一个 E 步计算中，这个过程不断交替进行。</p>
<p>通过交替使用这两个步骤，EM算法逐步改进模型的参数，使参数和训练样本的似然概率逐渐增大，最后终止于一个极大点。直观地理解EM算法，它也可被看作为一个逐次逼近算法：事先并不知道模型的参数，可以随机的选择一套参数或者事先粗略地给定某个初始参数λ0 ，确定出对应于这组参数的最可能的状态，计算每个训练样本的可能结果的概率，在当前的状态下再由样本对参数修正，重新估计参数λ，并在新的参数下重新确定模型的状态，这样，通过多次的迭代，循环直至某个收敛条件满足为止，就可以使得模型的参数逐渐逼近真实参数。</p>
<p>具体实现步骤：</p>
<ul>
<li>给出种类数k,初始化每一类高斯分布的均值μk，方差∑k以及每一类的概率πk；</li>
<li>执行EM；</li>
<li>计算似然，如果没有达到预期效果，则返回第2步；</li>
<li>计算每个数据点对于k个高斯分布的似然，选择似然最大的一类作为数据的最终分类。</li>
</ul>
<p>其他的混合模型，例如朴素贝叶斯混合模型也是可以使用EM算法推出使用的，这一算法虽然在GMM中作为参数使用，但是其仍然可以单独发挥作用。我觉得EM算法就是相互迭代（毕竟其由E和M两部分组成嘛），求出一个稳定值，而这种相互迭代的方法用的范围挺广的，例如混合模型，K-means等都需要使用。</p>
<h3 id="与K-means的区别"><a href="#与K-means的区别" class="headerlink" title="与K-means的区别"></a>与K-means的区别</h3><p>在上文我也已经提到了EM算法可以用在K-means等其他需要迭代的方法上的事实，其实，我觉得GMM 和 K-means 很像，只不过后者要简单，而且相对来说实现并不是很高效。不过 GMM 是学习出一些概率密度函数来（所以 GMM 除了用在 clustering 上之外，还经常被用于 density estimation ），简单地说，K-means 的结果是每个数据点被 assign 到其中某一个 cluster 了，而 GMM 则给出这些数据点被 assign 到每个 cluster 的概率，又称作 soft assignment。</p>
<h2 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h2><p>Spyder 作为Python开发的集成开发环境；<br>    编程语言：Python 3.5；<br>    操作系统：macOS Sierra。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>GMM算法作为EM算法族的一个例子，它指定了各个参与杂合的分布都是高斯分布，即分布参数表现为均值Mu和方差Sigma。通过EM算法作为计算使用的框架，迭代地算出各个高斯分布的参数。</p>
<h3 id="GMM与K-means的思考"><a href="#GMM与K-means的思考" class="headerlink" title="GMM与K-means的思考"></a>GMM与K-means的思考</h3><p>提到GMM不得不提K-means，总结了网上的资料以及老师上课的课件，我将两者的区别与联系陈述如下：</p>
<ul>
<li>两者的联系:</li>
</ul>
<p>都是迭代执行的算法，且迭代的策略也相同：算法开始执行时先对需要计算的参数赋初值，然后交替执行两个步骤，一个步骤是对数据的估计（k-means是估计每个点所属簇；GMM是计算隐含变量的期望）；第二步是用上一步算出的估计值重新计算参数值，更新目标参数（k-means是计算簇心位置；GMM是计算各个高斯分布的中心位置和协方差矩阵）</p>
<ul>
<li>两者的区别:</li>
</ul>
<p>首先，两者需要计算的参数不同：K-means是簇心位置；GMM是各个高斯分布的参数；其次，两者计算目标参数的方法不同：K-means是计算当前簇中所有元素的位置的均值；GMM是基于概率的算法，是通过计算似然函数的最大值实现分布参数的求解的。</p>
<h3 id="关于GMM引发的过拟合的思考"><a href="#关于GMM引发的过拟合的思考" class="headerlink" title="关于GMM引发的过拟合的思考"></a>关于GMM引发的过拟合的思考</h3><p>首先我想提到这样的一个“人辨认其他生物（例如鱼）”的例子。当我们被告知水里游的那个生物是鱼之后，我们会使用“在同样的地方生活的是同一种东西”这类似的假设，归纳出“在水里游的都是鱼”这样一个结论。当然这个过程是完全“本能”的，如果不仔细去想，我们也不会了解自己是怎样“认识鱼”的。另一个值得注意的地方是这样的假设并不总是完全正确的，甚至可以说总是会有这样那样的缺陷的，因为我们有可能会把虾、龟、甚至是潜水员当做鱼。也许你觉得可以通过修改前提假设来解决这个问题，例如，基于“生活在同样的地方并且穿着同样衣服的是同一种东西”这个假设，你得出结论：在水里有并且身上长有鳞片的是鱼。可是这样还是有问题，因为有些没有长鳞片的鱼现在又被你排除在外了。</p>
<p>机器在识别方面面临着和人一样的问题，在机器学习中，一个学习算法也会有一个前提假设，这里被称作“归纳偏执”。例如线性回归，目的是要找一个函数尽可能好地拟合给定的数据点，它的归纳偏执就是“满足要求的函数必须是线性函数”。一个没有归纳偏执的学习算法从某种意义上来说毫无用处，就像一个完全没有归纳能力的人一样，在第一次看到鱼的时候有人告诉他那是鱼，下次看到另一条鱼了，他并不知道那也是鱼，因为两条鱼总有一些地方不一样的，或者就算是同一条鱼，在河里不同的地方看到，或者只是看到的时间不一样，也会被他认为是不同的，因为他无法归纳，无法提取主要矛盾、忽略次要因素，只好要求所有的条件都完全一样──然而哲学家已经告诉过我们了：世界上不会有任何样东西是完全一样的，所以这个人即使是有无比强悍的记忆力，也绝学不到任何一点知识。</p>
<p>于是有了上面的铺垫，我们就可以引出论题——“过拟合 ”，就像前面的回归的问题，如果去掉“线性函数”这个归纳偏执，因为对于 N 个点，我们总是可以构造一个 N-1 次多项式函数，让它完美地穿过所有的这 N 个点，或者如果我用任何大于 N-1 次的多项式函数的话，我们甚至可以构造出无穷多个满足条件的函数出来。如果假定特定领域里的问题所给定的数据个数总是有个上限的话，我可以取一个足够大的 N ，从而得到一个（或者无穷多个）“超级函数”，能够拟合这个领域内所有的问题。</p>
<p>没有归纳偏执或者归纳偏执太宽泛会导致过拟合 ，然而另一个极端──限制过大的归纳偏执也是有问题的：如果数据本身并不是线性的，强行用线性函数去做回归通常并不能得到好结果（例如我在“实验一：多项式拟合曲线”中就做过相应的测试）。难点正在于在这之间寻找一个临界点。不过我们在这里相对于机器来说有一个很大的优势：人通常不会孤立地用某一个独立的系统和模型去处理问题，一个人每天都会从各个来源获取大量的信息，并且通过各种手段进行整合处理，归纳所得的所有知识最终得以统一地存储起来，并能有机地组合起来去解决特定的问题。</p>
<p>以上就是我关于“过拟合”的一点不全面的思考！</p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/机器学习/">机器学习</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
      </div>
      
        <div align="center" style="margin-top: 30px;"><hr class="hr" style="margin:0px; height:3px;"></div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p id="copyRightEn">Copyright &copy; 2018.02.08 - 2018.02.08 <a href="http://meng.uno/">匡盟盟</a> All Rights Reserved.</p>

	      
    		<p class="busuanzi_uv">
				访客数 : <span id="busuanzi_value_site_uv"></span> |
				访问量 : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>


  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/index.html" class="mobile-nav-link">Home</a>
  
    <a href="/archives/" class="mobile-nav-link">Archives</a>
  
    <a href="/categories/" class="mobile-nav-link">Categories</a>
  
    <a href="/tags/" class="mobile-nav-link">Tags</a>
  
    <a href="/cv.html" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>


  <script src="/js/home.js"></script>











	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            欢迎来到我的博客！
          </div>
          <div class="panel-body">
            Copyright © 2018 匡盟盟 All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
</body>
</html>